import{s as K}from"./index-DfY7MOwJ.js";import{h as i,o as l,v,w as y}from"./main-Dirrnzcr.js";import{D as L,a as I}from"./Common-dWa9BEsb.js";import{_ as M}from"./ViewList.vue_vue_type_style_index_0_lang-qcv9jr1D.js";const T={class:"query-container"},x={class:"query-btn"},F=Vue.createTextVNode("Search"),R=Vue.defineComponent({__name:"Account",setup(P){VueRouter.useRouter();const u=Vuex.useStore();u.state.user,u.state.roleCodeList,Vue.ref(null);const c=Vue.ref(new Array),n=Vue.ref([{value:"index",labelKey:"index",width:51,mergeKey:["userId"]},{value:"userIdFormat",labelKey:"user",width:157,mergeKey:["userId"]},{value:"reportDateCount",labelKey:"reportDateCount",width:61,mergeKey:["userId"]},{value:"deviceIdFormat",labelKey:"deviceNumber",width:150},{value:"deviceSumDeviceCompletePercentFormat",labelKey:"reportSumDeviceCompletePercent",width:115},{value:"deviceTotalCount",labelKey:"totalCount",width:61},{value:"deviceDeviceCompletePercentFormat",labelKey:"reportAvgDeviceCompletePercent",width:115},{value:"deviceSalaryFormat",labelKey:"reportSalary",width:115},{value:"sumDeviceCompletePercentFormat",labelKey:"reportSumDeviceCompletePercent",width:115,mergeKey:["userId"]},{value:"totalCount",labelKey:"totalCount",width:61,mergeKey:["userId"]},{value:"deviceCompletePercentFormat",labelKey:"reportDeviceCompletePercent",width:115,mergeKey:["userId"]},{value:"salaryFormat",labelKey:"reportSalary",width:115,mergeKey:["userId"]}]);Promise.all([i("douson/config",{categoryIdList:["device","processProcedure"]}),i("system/user/config/list",{})]).then(o=>{t.config=o[0].data||{},c.value=(o[1].list||[]).map(e=>({value:e.userId,label:e.name}))});const V=["deviceIdFormat","deviceSumDeviceCompletePercentFormat","deviceTotalCount","deviceDeviceCompletePercentFormat","deviceSalaryFormat"],d=Vue.ref(!0),m=o=>{n.value=n.value.map(e=>(V.indexOf(e.value)>=0&&(e.hide=!o),e))};m(d.value);const t=Vue.reactive({dateTimeList:[v(),y()],userConfigList:new Array,query:{data:{department:"",vocationType:"",user:"",date:"",startReportDate:l(v(),"yyyy-MM-dd"),endReportDate:l(y(),"yyyy-MM-dd")},page:{page:I,limit:L}},tableData:new Array,config:{vocationTypeList:[],departmentList:[]}}),h=()=>{t.dateTimeList&&t.dateTimeList.length>1?(t.query.data.startReportDate=l(t.dateTimeList[0],"yyyy-MM-dd"),t.query.data.endReportDate=l(t.dateTimeList[1],"yyyy-MM-dd")):(t.query.data.startReportDate="",t.query.data.endReportDate=""),r()},r=()=>{i("douson/report/summary/account",t.query.data).then(o=>{t.tableData=o.list,ElementPlus.ElMessage.success("Query success")})};r();const{query:p,tableData:f,dateTimeList:s}={...Vue.toRefs(t)};return(o,e)=>{const C=Vue.resolveComponent("el-date-picker"),_=Vue.resolveComponent("el-option"),g=Vue.resolveComponent("el-select"),w=Vue.resolveComponent("el-button"),D=Vue.resolveComponent("el-switch"),b=Vue.resolveComponent("el-space");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createElementVNode("div",T,[Vue.createVNode(C,{modelValue:Vue.unref(s),"onUpdate:modelValue":e[0]||(e[0]=a=>Vue.isRef(s)?s.value=a:null),onChange:h,type:"daterange",format:"YYYY-MM-DD","range-separator":"-","start-placeholder":"Start due date","end-placeholder":"End due date",style:{width:"180px","margin-right":"20px"}},null,8,["modelValue"]),Vue.createVNode(g,{modelValue:Vue.unref(p).data.userId,"onUpdate:modelValue":e[1]||(e[1]=a=>Vue.unref(p).data.userId=a),onChange:r,filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(u).state.label.user},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(c.value,a=>(Vue.openBlock(),Vue.createBlock(_,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),Vue.createElementVNode("div",x,[Vue.createVNode(w,{icon:Vue.unref(K),onClick:r,type:"primary"},{default:Vue.withCtx(()=>[F]),_:1},8,["icon"])])]),Vue.createElementVNode("div",null,[Vue.createVNode(b,{wrap:""},{default:Vue.withCtx(()=>[Vue.createVNode(D,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=a=>d.value=a),"active-text":"Show more","inactive-text":"Hide info",onChange:m},null,8,["modelValue"])]),_:1})]),Vue.createVNode(M,{idKey:"id",columnConfigList:n.value,list:Vue.unref(f)},{operator:Vue.withCtx(a=>[]),_:1},8,["columnConfigList","list"])])}}});export{R as _};
