import{s as q,p as S,e as K}from"./index-DfY7MOwJ.js";import{i as _,h as M,q as A,b as F,a as U}from"./main-Dirrnzcr.js";import{D as $,a as W}from"./Common-dWa9BEsb.js";const z={class:"query-container"},G={class:"query-btn"},Q=Vue.createTextVNode("Search "),j=Vue.createTextVNode("Add "),J=Vue.createTextVNode(" Edit "),H=Vue.createTextVNode(" Delete "),X={class:"dialog-footer"},Y=Vue.createTextVNode("Cancel"),Z=Vue.createTextVNode("Confirm"),oe=Vue.defineComponent({__name:"Param",setup(ee){const e=Vuex.useStore(),C=e.state.roleCodeList,h=Vue.ref(null),l=Vue.reactive({query:{data:{paramCategoryId:""},page:{page:W,limit:$}},tableData:new Array,formData:{paramCategoryId:"",paramCode:"",paramName:"",paramValue:null,sorter:0},formSave:!1,formVisible:!1,formRuleList:{paramCategoryId:[{required:!0,message:"请选择参数类型",trigger:"blur"}],paramCode:[{required:!0,message:"请输入参数编码",trigger:"blur"}],paramName:[{required:!0,message:"请输入参数名称",trigger:"blur"}],sorter:[{required:!0,message:"请输入排序",trigger:"blur"}]}}),V=[{labelKey:"vocationRecord",paramCategoryIdOptionList:[{value:"vocationType",label:e.state.label.vocationType}]},{labelKey:"deviceCheckLedger",paramCategoryIdOptionList:[{value:"chineseVietnamName",label:e.state.label.chineseVietnamName},{value:"calibrationPeriod",label:e.state.label.calibrationPeriod},{value:"storage",label:e.state.label.storage},{value:"deviceCheckLedgerState",label:e.state.label.deviceCheckLedgerState}]},{labelKey:"userManage",paramCategoryIdOptionList:[{value:"userProperty",label:e.state.label.userProperty},{value:"schedule",label:e.state.label.schedule},{value:"department",label:e.state.label.department},{value:"profession",label:e.state.label.profession}]},{labelKey:"productQuotaManage",paramCategoryIdOptionList:[{value:"processProcedure",label:e.state.label.processProcedure}]},{labelKey:"userRunReport",paramCategoryIdOptionList:[{value:"processType",label:e.state.label.processType},{value:"workMinute",label:e.state.label.workMinute},{value:"stopWorkingContent1",label:e.state.label.stopWorkingContent1},{value:"stopWorkingContent2",label:e.state.label.stopWorkingContent2},{value:"stopWorkingContent3",label:e.state.label.stopWorkingContent3}]},{labelKey:"boxFlagCard",paramCategoryIdOptionList:[{value:"customerShortName",label:e.state.label.customerShortName}]},{labelKey:"disqualificationOrder",paramCategoryIdOptionList:[{value:"process",label:e.state.label.process},{value:"checkPoint",label:e.state.label.checkPoint},{value:"qualityDealOpinion",label:e.state.label.qualityDealOpinion},{value:"skillDealOpinion",label:e.state.label.skillDealOpinion},{value:"defectType",label:e.state.label.defectType}]},{labelKey:"accidentQuality",paramCategoryIdOptionList:[{value:"qualityReason",label:e.state.label.qualityReason},{value:"crashReason",label:e.state.label.crashReason},{value:"troubleReason",label:e.state.label.troubleReason}]},{labelKey:"keepImprove",paramCategoryIdOptionList:[{value:"optimizeType",label:e.state.label.optimizeType},{value:"responsibleTeam",label:e.state.label.responsibleTeam}]},{labelKey:"computerManage",paramCategoryIdOptionList:[{value:"computerName",label:e.state.label.computerName},{value:"companyPosition",label:e.state.label.companyPosition},{value:"computerState",label:e.state.label.computerState}]},{labelKey:"accidentEvent",paramCategoryIdOptionList:[{value:"eventReason",label:e.state.label.eventReason},{value:"improveReason",label:e.state.label.accidentImproveReason}]},{labelKey:"productMachine",paramCategoryIdOptionList:[{value:"equipmentPosition",label:e.state.label.equipmentPosition},{value:"brokenReason",label:e.state.label.brokenReason},{value:"repairType",label:e.state.label.repairType}]},{labelKey:"inventoryOutOfPlanType",paramCategoryIdOptionList:[{value:"inventoryOutOfPlanType",label:e.state.label.type}]}],N=r=>{for(let t=0;t<V.length;t++){const i=V[t].paramCategoryIdOptionList||[];for(let n=0;n<i.length;n++){const d=i[n];if(d.value===r)return d.label}}return r},s=()=>{M("douson/admin/param/list",l.query.data).then(r=>{l.tableData=r.list,ElementPlus.ElMessage.success("Query success")})},x=()=>{o.value.paramCategoryId=l.query.data.paramCategoryId,s()},w=()=>{l.formVisible=!0,l.formSave=!0},I=r=>{l.formVisible=!0,l.formSave=!1,l.formData=Object.assign({},r)},L=()=>{h.value.validate(r=>{r&&(l.formSave?A("douson/admin/param",l.formData).then(()=>{l.formVisible=!1,ElementPlus.ElMessage.success("Add success"),s()}):F("douson/admin/param",l.formData).then(()=>{l.formVisible=!1,ElementPlus.ElMessage.success("Update success"),s()}))})},O=r=>{ElementPlus.ElMessageBox.confirm("Confirm Delete?","Tips",{type:"warning"}).then(()=>{U("douson/admin/param",r).then(()=>{ElementPlus.ElMessage.success("Delete success"),s()})})},{query:y,tableData:E,formData:o,formSave:g,formVisible:c,formRuleList:T}={...Vue.toRefs(l)};return(r,t)=>{const i=Vue.resolveComponent("el-option"),n=Vue.resolveComponent("el-option-group"),d=Vue.resolveComponent("el-select"),b=Vue.resolveComponent("el-button"),p=Vue.resolveComponent("el-table-column"),k=Vue.resolveComponent("el-link"),P=Vue.resolveComponent("el-space"),D=Vue.resolveComponent("el-table"),f=Vue.resolveComponent("el-form-item"),v=Vue.resolveComponent("el-input"),R=Vue.resolveComponent("el-form"),B=Vue.resolveComponent("el-dialog");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createElementVNode("div",z,[Vue.createVNode(d,{modelValue:Vue.unref(y).data.paramCategoryId,"onUpdate:modelValue":t[0]||(t[0]=a=>Vue.unref(y).data.paramCategoryId=a),filterable:"","allow-create":"",clearable:"",placeholder:"请选择参数类型",onChange:x},{default:Vue.withCtx(()=>[(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(V,(a,m)=>Vue.createVNode(n,{key:`group-${m}`,label:Vue.unref(e).state.label[a.labelKey]},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(a.paramCategoryIdOptionList,u=>(Vue.openBlock(),Vue.createBlock(i,{key:u.value,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"]),Vue.createElementVNode("div",G,[Vue.createVNode(b,{icon:Vue.unref(q),onClick:s,type:"primary"},{default:Vue.withCtx(()=>[Q]),_:1},8,["icon"]),Vue.unref(_)(Vue.unref(C),"admin")?(Vue.openBlock(),Vue.createBlock(b,{key:0,icon:Vue.unref(S),onClick:w,type:"success"},{default:Vue.withCtx(()=>[j]),_:1},8,["icon"])):Vue.createCommentVNode("",!0)])]),Vue.createVNode(D,{"header-cell-style":{background:" rgba(250, 251, 252, 1)",color:"rgba(102, 102, 102, 1)",height:"54px",fontSize:"14px",padding:0,border:"none",boxShadow:"inset 0px -1px 0px  rgba(238, 238, 238, 1),inset 0px 1px 0px  rgba(238, 238, 238, 1)"},data:Vue.unref(E)},{default:Vue.withCtx(()=>[Vue.createVNode(p,{prop:"paramCategoryId",label:"参数分类",width:"256",align:"left"},{default:Vue.withCtx(a=>[Vue.createTextVNode(Vue.toDisplayString(N(a.row.paramCategoryId))+"（"+Vue.toDisplayString(a.row.paramCategoryId)+"） ",1)]),_:1}),Vue.createVNode(p,{prop:"paramCode",label:"参数编码",width:"192",align:"left"}),Vue.createVNode(p,{prop:"paramName",label:"参数名称",width:"256",align:"left"}),Vue.createVNode(p,{prop:"sorter",label:"排序",width:"64",align:"left"}),Vue.createVNode(p,{prop:"operator",label:"操作",width:"256"},{default:Vue.withCtx(a=>[Vue.createVNode(P,null,{default:Vue.withCtx(()=>[Vue.unref(_)(Vue.unref(C),"admin")?(Vue.openBlock(),Vue.createBlock(k,{key:0,icon:Vue.unref(K),onClick:m=>I(a.row,a.$index),class:"mr10",type:"warning"},{default:Vue.withCtx(()=>[J]),_:2},1032,["icon","onClick"])):Vue.createCommentVNode("",!0),Vue.unref(_)(Vue.unref(C),"admin")?(Vue.openBlock(),Vue.createBlock(k,{key:1,onClick:m=>O(a.row),type:"danger"},{default:Vue.withCtx(()=>[H]),_:2},1032,["onClick"])):Vue.createCommentVNode("",!0)]),_:2},1024)]),_:1})]),_:1},8,["header-cell-style","data"]),Vue.createVNode(B,{title:Vue.unref(g)?"Add":"Edit",modelValue:Vue.unref(c),"onUpdate:modelValue":t[7]||(t[7]=a=>Vue.isRef(c)?c.value=a:null),width:"60%","close-on-click-modal":!1},{footer:Vue.withCtx(()=>[Vue.createElementVNode("span",X,[Vue.createVNode(b,{onClick:t[6]||(t[6]=a=>c.value=!1)},{default:Vue.withCtx(()=>[Y]),_:1}),Vue.createVNode(b,{type:"primary",onClick:L},{default:Vue.withCtx(()=>[Z]),_:1})])]),default:Vue.withCtx(()=>[Vue.createVNode(R,{rules:Vue.unref(T),model:Vue.unref(o),ref_key:"formRef",ref:h,"label-width":"128px"},{default:Vue.withCtx(()=>[Vue.createVNode(f,{prop:"paramCategoryId",label:"参数分类",ref:"formAutoFocusRef"},{default:Vue.withCtx(()=>[Vue.createVNode(d,{modelValue:Vue.unref(o).paramCategoryId,"onUpdate:modelValue":t[1]||(t[1]=a=>Vue.unref(o).paramCategoryId=a),disabled:!Vue.unref(g),clearable:"",placeholder:"参数类型",onChange:t[2]||(t[2]=a=>Vue.unref(y).data.paramCategoryId=Vue.unref(o).paramCategoryId)},{default:Vue.withCtx(()=>[(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(V,(a,m)=>Vue.createVNode(n,{key:`group-${m}`,label:Vue.unref(e).state.label[a.labelKey]},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(a.paramCategoryIdOptionList,u=>(Vue.openBlock(),Vue.createBlock(i,{key:u.value,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:2},1032,["label"])),64))]),_:1},8,["modelValue","disabled"])]),_:1},512),Vue.createVNode(f,{prop:"paramCode",label:"参数编码"},{default:Vue.withCtx(()=>[Vue.createVNode(v,{modelValue:Vue.unref(o).paramCode,"onUpdate:modelValue":t[3]||(t[3]=a=>Vue.unref(o).paramCode=a),disabled:!Vue.unref(g)},null,8,["modelValue","disabled"])]),_:1}),Vue.createVNode(f,{prop:"paramName",label:"参数名称"},{default:Vue.withCtx(()=>[Vue.createVNode(v,{modelValue:Vue.unref(o).paramName,"onUpdate:modelValue":t[4]||(t[4]=a=>Vue.unref(o).paramName=a)},null,8,["modelValue"])]),_:1}),Vue.createVNode(f,{prop:"sorter",label:"排序"},{default:Vue.withCtx(()=>[Vue.createVNode(v,{modelValue:Vue.unref(o).sorter,"onUpdate:modelValue":t[5]||(t[5]=a=>Vue.unref(o).sorter=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])])}}});export{oe as default};
