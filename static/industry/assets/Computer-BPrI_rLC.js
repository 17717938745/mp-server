import{s as G,p as J,m as Q}from"./index-DfY7MOwJ.js";import{i as f,h as _,o as H,p as W,q as X,b as Z,a as ee}from"./main-Dirrnzcr.js";import{D as le,a as te}from"./Common-dWa9BEsb.js";import{V as C}from"./ViewContent.vue_vue_type_script_setup_true_lang-Dpo1Y2zC.js";import{_ as ae}from"./ViewList.vue_vue_type_style_index_0_lang-qcv9jr1D.js";import{_ as ue}from"./ImageUpload.vue_vue_type_script_setup_true_lang-BZyBfOer.js";import"./IndustryUtil-CgRifmxX.js";import"./TableViewContent.vue_vue_type_script_setup_true_lang-5zjbO-p-.js";import"./TableColumnViewContent.vue_vue_type_script_setup_true_lang-s5dcpuXa.js";const oe={class:"query-container"},re={class:"query-btn"},ne=Vue.createTextVNode("Search"),de=Vue.createTextVNode("Add "),se=Vue.createTextVNode("Print"),Ve={class:"dialog-footer"},ie=Vue.createTextVNode("Cancel"),ce=Vue.createTextVNode("Confirm"),me={style:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center","margin-bottom":"20px"}},pe={style:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",width:"585px"}},fe={style:{"text-align":"center",height:"50px",position:"relative",width:"100%"}},be=["src"],he=Vue.createElementVNode("span",{style:{"font-size":"36px",color:"#ff0000"}},"ASSET CARD 财产卡",-1),ge=Vue.createElementVNode("br",null,null,-1),Ne=Vue.createTextVNode("` "),ve=Vue.createTextVNode(" Mã thiết bị 设备物料号 "),we=Vue.createTextVNode(" Người Sử Dụng 用户 "),_e=Vue.createTextVNode(" Vị trí 位置 "),Ce=Vue.createTextVNode(" Bộ Phận 部门 "),Ke=Vue.defineComponent({__name:"Computer",setup(xe){VueRouter.useRouter();const t=Vuex.useStore(),D=t.state.user,c=t.state.roleCodeList,N=Vue.ref(!1),m=Vue.ref(null),x=Vue.ref(null),v=Vue.ref(new Array),w=Vue.ref([{value:"expand",label:"",width:48,type:C.Expand},{value:"operator",labelKey:"viewAndEdit",width:312,type:C.Operator},{value:"index",labelKey:"index",width:51},{value:"photoCount",labelKey:"photoCount",width:57},{value:"materialNo",labelKey:"materialNo",width:189},{value:"brand",labelKey:"brand",width:96},{value:"computerNameFormat",labelKey:"computerName",width:189},{value:"model",labelKey:"computerModel",width:293,showOverflow:!0},{value:"departmentFormat",labelKey:"department",width:168},{value:"userChineseName",labelKey:"chineseName",width:190},{value:"professionFormat",labelKey:"profession",width:268},{value:"positionFormat",labelKey:"position",width:96},{value:"storageDate",labelKey:"storageDate",width:102},{value:"computerStateFormat",labelKey:"computerState",width:168},{value:"detailedFormat",labelKey:"detailed",width:96},{value:"productPlace",labelKey:"productPlace",width:96},{value:"supplier",labelKey:"supplier",width:96},{value:"remark",labelKey:"description",width:169,showOverflow:!0},{value:"photoList",labelKey:"photo",type:C.Image,width:96}]);!f(c,"admin")&&!f(c,"manager")&&(w.value=w.value.map(u=>(u.value==="dealOpinion"&&(u.children=(u.children||[]).filter(l=>l.value!=="fineAmountFormat")),u))),_("system/user/config/list",{}).then(u=>{o.userConfigList=u.list||[],v.value=o.userConfigList.map(l=>({value:l.userId,label:l.name}))});const y={creator:D.userId,index:"",computerId:"",materialNo:"",brand:"",computerName:"",model:"",userId:"",position:"",storageDate:"",computerState:"",detailed:null,productPlace:"",supplier:"",remark:"",photoList:new Array},o=Vue.reactive({dateTimeList:[],photoVisible:!1,photoList:new Array,userConfigList:new Array,expandRowKeys:new Array,query:{data:{userId:"",startDueDate:"",endDueDate:"",deviceNumber:"",specification:"",chineseVietnamName:"",deviceCheckLedgerState:"",borrower:"",storage:"",outOfStock:null},page:{page:te,limit:le}},tableData:new Array,total:0,formData:Object.assign({},y),formSave:!1,config:{computerNameList:[],companyPositionList:[],computerStateList:[]},formVisible:!1,managerEdit:!1,formRuleList:{materialNo:[{required:!0,message:"Please check",trigger:"blur"}],brand:[{required:!0,message:"Please check",trigger:"blur"}],computerName:[{required:!0,message:"Please check",trigger:"blur"}],model:[{required:!0,message:"Please check",trigger:"blur"}],userId:[{required:!0,message:"Please check",trigger:"blur"}],storageDate:[{required:!0,message:"Please check",trigger:"blur"}],computerState:[{required:!0,message:"Please check",trigger:"blur"}],detailed:[{required:!0,message:"Please check",trigger:"blur"}],productPlace:[{required:!0,message:"Please check",trigger:"blur"}],photoList:[{required:!1,type:"array",min:0,max:3}]}}),L=u=>{m.value=Object.assign({},u.param||{}),N.value=!0};_("douson/config",{categoryIdList:["computerName","companyPosition","computerState"]}).then(u=>{o.config=u.data});const n=()=>{_("douson/admin/computer/page",o.query).then(u=>{o.tableData=u.list,o.total=u.total,ElementPlus.ElMessage.success("Query success")})},E=u=>{o.query.page.page=u,n()},P=u=>{o.query.page.limit=u,n()};n();const B=()=>{o.formData=Object.assign({},y),o.formVisible=!0,o.formSave=!0},S=(u,l=!1)=>{o.managerEdit=l,o.formVisible=!0,o.formSave=!1,o.formData=Object.assign({},u)},U=u=>f(c,"admin")||f(c,"itManager")?!0:u.creator===t.state.user.userId,T=()=>{x.value.validate(u=>{u&&(o.formSave?X("douson/admin/computer",o.formData).then(()=>{o.formVisible=!1,ElementPlus.ElMessage.success("Add success"),n()}):k(o.formData))})},k=u=>Z("douson/admin/computer",u).then(()=>{o.formVisible=!1,ElementPlus.ElMessage.success("Update success"),n()}),K=u=>{ElementPlus.ElMessageBox.confirm("Confirm Delete?","Tips",{type:"warning"}).then(()=>{ee("douson/admin/computer",{computerId:u.computerId}).then(()=>{ElementPlus.ElMessage.success("Delete success"),n()})})},{query:r,tableData:F,config:p,total:I,formData:a,formSave:q,formVisible:b,formRuleList:M}={...Vue.toRefs(o)};return(u,l)=>{const s=Vue.resolveComponent("el-option"),V=Vue.resolveComponent("el-select"),i=Vue.resolveComponent("el-input"),h=Vue.resolveComponent("el-button"),A=Vue.resolveComponent("el-tag"),O=Vue.resolveComponent("el-link"),d=Vue.resolveComponent("el-form-item"),R=Vue.resolveComponent("el-date-picker"),j=Vue.resolveComponent("el-form"),Y=Vue.resolveComponent("el-dialog"),g=Vue.resolveComponent("el-descriptions-item"),z=Vue.resolveComponent("el-descriptions"),$=Vue.resolveComponent("el-drawer");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createElementVNode("div",oe,[Vue.createVNode(V,{modelValue:Vue.unref(r).data.userId,"onUpdate:modelValue":l[0]||(l[0]=e=>Vue.unref(r).data.userId=e),onChange:n,filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(t).state.label.chineseName,class:"search-item"},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(v.value,e=>(Vue.openBlock(),Vue.createBlock(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),Vue.createVNode(i,{modelValue:Vue.unref(r).data.brand,"onUpdate:modelValue":l[1]||(l[1]=e=>Vue.unref(r).data.brand=e),onChange:n,placeholder:Vue.unref(t).state.label.brand,class:"search-item"},null,8,["modelValue","placeholder"]),Vue.createVNode(V,{modelValue:Vue.unref(r).data.computerName,"onUpdate:modelValue":l[2]||(l[2]=e=>Vue.unref(r).data.computerName=e),onChange:n,filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(t).state.label.computerName,class:"search-item"},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(p).computerNameList,e=>(Vue.openBlock(),Vue.createBlock(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),Vue.createVNode(i,{modelValue:Vue.unref(r).data.materialNo,"onUpdate:modelValue":l[3]||(l[3]=e=>Vue.unref(r).data.materialNo=e),onChange:n,placeholder:Vue.unref(t).state.label.materialNo,class:"search-item"},null,8,["modelValue","placeholder"]),Vue.createVNode(i,{modelValue:Vue.unref(r).data.model,"onUpdate:modelValue":l[4]||(l[4]=e=>Vue.unref(r).data.model=e),onChange:n,placeholder:Vue.unref(t).state.label.computerModel,class:"search-item"},null,8,["modelValue","placeholder"]),Vue.createVNode(V,{modelValue:Vue.unref(r).data.position,"onUpdate:modelValue":l[5]||(l[5]=e=>Vue.unref(r).data.position=e),onChange:n,clearable:"",placeholder:Vue.unref(t).state.label.position},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(p).companyPositionList,e=>(Vue.openBlock(),Vue.createBlock(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),Vue.createVNode(V,{modelValue:Vue.unref(r).data.detailed,"onUpdate:modelValue":l[6]||(l[6]=e=>Vue.unref(r).data.detailed=e),onChange:n,clearable:"",placeholder:Vue.unref(t).state.label.detailed},{default:Vue.withCtx(()=>[Vue.createVNode(s,{label:"Yes",value:!0}),Vue.createVNode(s,{label:"No",value:!1})]),_:1},8,["modelValue","placeholder"]),Vue.createElementVNode("div",re,[Vue.createVNode(h,{icon:Vue.unref(G),onClick:n,type:"primary"},{default:Vue.withCtx(()=>[ne]),_:1},8,["icon"]),Vue.createVNode(h,{icon:Vue.unref(J),onClick:B,type:"success"},{default:Vue.withCtx(()=>[de]),_:1},8,["icon"])])]),Vue.createVNode(ae,{idKey:"computerId",columnConfigList:w.value,list:Vue.unref(F),handleEdit:S,handleUpdate:k,handleEditShow:U,handleDelete:Vue.unref(f)(Vue.unref(c),"admin")?K:null,page:Vue.unref(r).page,total:Vue.unref(I),handlePageChange:E,handleLimitChange:P},{operator:Vue.withCtx(e=>[Vue.createVNode(O,{icon:Vue.unref(Q),onClick:ye=>L(e),class:"mr10",type:"info"},{default:Vue.withCtx(()=>[Vue.createVNode(A,{size:"small"},{default:Vue.withCtx(()=>[se]),_:1})]),_:2},1032,["icon","onClick"])]),_:1},8,["columnConfigList","list","handleDelete","page","total"]),Vue.createVNode(Y,{title:Vue.unref(q)?"Add":"Edit",modelValue:Vue.unref(b),"onUpdate:modelValue":l[21]||(l[21]=e=>Vue.isRef(b)?b.value=e:null),width:"60%","close-on-click-modal":!1},{footer:Vue.withCtx(()=>[Vue.createElementVNode("span",Ve,[Vue.createVNode(h,{onClick:l[20]||(l[20]=e=>b.value=!1)},{default:Vue.withCtx(()=>[ie]),_:1}),Vue.createVNode(h,{type:"primary",onClick:T},{default:Vue.withCtx(()=>[ce]),_:1})])]),default:Vue.withCtx(()=>[Vue.createVNode(j,{rules:Vue.unref(M),model:Vue.unref(a),ref_key:"formRef",ref:x,"label-width":"auto","label-position":"top"},{default:Vue.withCtx(()=>[Vue.createVNode(d,{prop:"materialNo",label:Vue.unref(t).state.label.materialNo},{default:Vue.withCtx(()=>[Vue.createVNode(i,{modelValue:Vue.unref(a).materialNo,"onUpdate:modelValue":l[7]||(l[7]=e=>Vue.unref(a).materialNo=e)},null,8,["modelValue"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"brand",label:Vue.unref(t).state.label.brand},{default:Vue.withCtx(()=>[Vue.createVNode(i,{modelValue:Vue.unref(a).brand,"onUpdate:modelValue":l[8]||(l[8]=e=>Vue.unref(a).brand=e)},null,8,["modelValue"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"computerName",label:Vue.unref(t).state.label.computerName},{default:Vue.withCtx(()=>[Vue.createVNode(V,{modelValue:Vue.unref(a).computerName,"onUpdate:modelValue":l[9]||(l[9]=e=>Vue.unref(a).computerName=e),filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(t).state.label.computerName},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(p).computerNameList,e=>(Vue.openBlock(),Vue.createBlock(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"model",label:Vue.unref(t).state.label.computerModel},{default:Vue.withCtx(()=>[Vue.createVNode(i,{modelValue:Vue.unref(a).model,"onUpdate:modelValue":l[10]||(l[10]=e=>Vue.unref(a).model=e)},null,8,["modelValue"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"userId",label:Vue.unref(t).state.label.user},{default:Vue.withCtx(()=>[Vue.createVNode(V,{modelValue:Vue.unref(a).userId,"onUpdate:modelValue":l[11]||(l[11]=e=>Vue.unref(a).userId=e),filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(t).state.label.user},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(v.value,e=>(Vue.openBlock(),Vue.createBlock(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"position",label:Vue.unref(t).state.label.position},{default:Vue.withCtx(()=>[Vue.createVNode(V,{modelValue:Vue.unref(a).position,"onUpdate:modelValue":l[12]||(l[12]=e=>Vue.unref(a).position=e),filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(t).state.label.position},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(p).companyPositionList,e=>(Vue.openBlock(),Vue.createBlock(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"storageDate",label:Vue.unref(t).state.label.storageDate},{default:Vue.withCtx(()=>[Vue.createVNode(R,{type:"date",modelValue:Vue.unref(a).storageDate,"onUpdate:modelValue":l[13]||(l[13]=e=>Vue.unref(a).storageDate=e),format:"YYYY-MM-DD",onChange:l[14]||(l[14]=e=>Vue.unref(a).storageDate=Vue.unref(H)(Vue.unref(a).storageDate,"yyyy-MM-dd"))},null,8,["modelValue"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"computerState",label:Vue.unref(t).state.label.computerState},{default:Vue.withCtx(()=>[Vue.createVNode(V,{modelValue:Vue.unref(a).computerState,"onUpdate:modelValue":l[15]||(l[15]=e=>Vue.unref(a).computerState=e),filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(t).state.label.computerState},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(p).computerStateList,e=>(Vue.openBlock(),Vue.createBlock(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"detailed",label:Vue.unref(t).state.label.detailed},{default:Vue.withCtx(()=>[Vue.createVNode(V,{modelValue:Vue.unref(a).detailed,"onUpdate:modelValue":l[16]||(l[16]=e=>Vue.unref(a).detailed=e),filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(t).state.label.detailed},{default:Vue.withCtx(()=>[Vue.createVNode(s,{label:"Yes",value:!0}),Vue.createVNode(s,{label:"No",value:!1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"productPlace",label:Vue.unref(t).state.label.productPlace},{default:Vue.withCtx(()=>[Vue.createVNode(i,{modelValue:Vue.unref(a).productPlace,"onUpdate:modelValue":l[17]||(l[17]=e=>Vue.unref(a).productPlace=e)},null,8,["modelValue"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"supplier",label:Vue.unref(t).state.label.supplier},{default:Vue.withCtx(()=>[Vue.createVNode(i,{modelValue:Vue.unref(a).supplier,"onUpdate:modelValue":l[18]||(l[18]=e=>Vue.unref(a).supplier=e)},null,8,["modelValue"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"remark",label:Vue.unref(t).state.label.description},{default:Vue.withCtx(()=>[Vue.createVNode(i,{modelValue:Vue.unref(a).remark,"onUpdate:modelValue":l[19]||(l[19]=e=>Vue.unref(a).remark=e)},null,8,["modelValue"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"photoList",label:Vue.unref(t).state.label.photo},{default:Vue.withCtx(()=>[Vue.createVNode(ue,{photoList:Vue.unref(a).photoList,maxSize:3},null,8,["photoList"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"]),Vue.createVNode($,{modelValue:N.value,"onUpdate:modelValue":l[22]||(l[22]=e=>N.value=e),size:"100%","append-to-body":!0,"lock-scroll":!1,"modal-class":"print-drawer","z-index":99999},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",me,[Vue.createElementVNode("div",pe,[Vue.createElementVNode("h1",fe,[Vue.createElementVNode("img",{src:Vue.unref(W)("/third/img/douson.png",""),style:{position:"absolute",height:"100%",left:"10px",top:"0px"}},null,8,be),he,ge]),Vue.createVNode(z,{column:1,style:{width:"100%"},border:""},{default:Vue.withCtx(()=>[Ne,Vue.createVNode(g,{label:Vue.unref(t).state.label.materialNo,align:"center","label-class-name":"box-print-label"},{label:Vue.withCtx(()=>[ve]),default:Vue.withCtx(()=>[Vue.createTextVNode(" "+Vue.toDisplayString(m.value.materialNo),1)]),_:1},8,["label"]),Vue.createVNode(g,{label:Vue.unref(t).state.label.chineseName,align:"center","label-class-name":"box-print-label"},{label:Vue.withCtx(()=>[we]),default:Vue.withCtx(()=>[Vue.createTextVNode(" "+Vue.toDisplayString(m.value.userChineseName),1)]),_:1},8,["label"]),Vue.createVNode(g,{label:Vue.unref(t).state.label.position,align:"center","label-class-name":"box-print-label"},{label:Vue.withCtx(()=>[_e]),default:Vue.withCtx(()=>[Vue.createTextVNode(" "+Vue.toDisplayString(m.value.positionFormat),1)]),_:1},8,["label"]),Vue.createVNode(g,{label:Vue.unref(t).state.label.department,align:"center","label-class-name":"box-print-label"},{label:Vue.withCtx(()=>[Ce]),default:Vue.withCtx(()=>[Vue.createTextVNode(" "+Vue.toDisplayString(m.value.departmentFormat),1)]),_:1},8,["label"])]),_:1})])])]),_:1},8,["modelValue"])])}}});export{Ke as default};
