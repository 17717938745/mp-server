import{h as x,b as J,a as L,_ as $}from"./main-Dirrnzcr.js";import{D as F,a as A}from"./Common-dWa9BEsb.js";import{s as H,e as R,b as j,d as z,g as K,h as Q,i as G,j as O,k as Y,l as W}from"./index-DfY7MOwJ.js";import{_ as X}from"./Commentary.vue_vue_type_style_index_0_lang-CihbeaDX.js";const Z=c=>(Vue.pushScopeId("data-v-bf07f829"),c=c(),Vue.popScopeId(),c),ee={style:{"background-color":"#f4f6f9",display:"flex","align-items":"start","justify-content":"center",padding:"10px 10px 10px 10px","flex-wrap":"wrap"}},te={style:{"background-color":"#ffffff","margin-right":"40px","border-radius":"5px",padding:"0","margin-bottom":"20px"},class:"forum-content"},oe={style:{"font-size":"20px","font-weight":"600","border-bottom":"1px solid #eeeeee",padding:"20px",background:"radial-gradient(circle, #7b6262, #be8b5a, #6facb7)",color:"#2927cf"}},ne={style:{"overflow-y":"auto"}},ue={style:{display:"inline-flex","align-items":"center"}},ae=["innerHTML"],le={key:0,style:{"margin-bottom":"15px",display:"flex","align-items":"center","padding-left":"5px"}},se=["innerHTML"],re={style:{height:"50px",display:"flex","align-items":"center","justify-content":"space-between",cursor:"pointer",color:"#c4c7ce"}},ie={style:{display:"flex","align-items":"center"}},ce=["onClick"],de=["onClick"],pe={style:{display:"flex","align-items":"center"}},Ve=["onClick"],me={key:0,class:"icon-text"},fe={key:1,class:"icon-text"},he={style:{"background-color":"#ffffff",padding:"10px","border-radius":"5px"},class:"todo-content"},ye={style:{display:"flex","justify-content":"start",margin:"10px 0 10px"}},_e={style:{width:"100%",display:"flex","justify-content":"center"}},ge=Z(()=>Vue.createElementVNode("div",{class:"card-header"},[Vue.createElementVNode("span",null,"待办 Hàng chờ làm")],-1)),xe={class:"infinite-list",style:{overflow:"auto"}},ve=Vue.defineComponent({__name:"Dashboard",setup(c){const a=Vuex.useStore(),p=a.state.user,n=VueRouter.useRouter();VueRouter.useRoute();const v=Vue.ref(0),k=()=>{v.value+=2},V=Vue.ref({count:0,list:[]}),l=Vue.ref({page:{page:A,limit:F},data:{title:""}}),s=Vue.ref({total:0,list:[]}),r=Vue.ref({}),m=Vue.ref({}),b=()=>{x("douson/todo/list",{}).then(e=>{V.value.count=e.data.count,V.value.list=e.data.list||[],ElementPlus.ElMessage.success("Query success")})},N=e=>{e.type===0?E(e):e.type===1?C(e):e.type===2?B(e):e.type===3?D(e):e.type===4?I(e):e.type===5?w(e):e.type===6?T(e):ElementPlus.ElMessage.warning("Not support todo: "+JSON.stringify(e))},E=e=>{n.push({path:"/industry/admin/report/disqualification",query:{disqualificationOrderId:e.id}})},C=e=>{n.push({path:"/industry/admin/report/accident/event",query:{eventId:e.id}})},I=e=>{n.push({path:"/industry/admin/report/accident/quality",query:{qualityId:e.id}})},w=e=>{n.push({path:"/industry/admin/report/accident/crash",query:{crashId:e.id}})},T=e=>{n.push({path:"/industry/admin/report/accident/trouble",query:{troubleId:e.id}})},B=e=>{n.push({path:"/industry/admin/report/accident/improve",query:{improveId:e.id}})},D=e=>{n.push({path:"/industry/admin/asset/machine/maintain",query:{maintainId:e.id}})},S=()=>{s.value.list.length<s.value.total?(l.value.page.page=l.value.page.page+1,d()):console.log("not change...")},q=()=>{l.value.page.page=1,d(!0)},d=(e=!1)=>{x("forum/page",l.value).then(o=>{s.value.total=o.total,e?s.value.list=o.list||[]:s.value.list.push(...o.list||[]),ElementPlus.ElMessage.success("Query success")})},y=(e,o)=>{const f={thumbsUp:o,forumId:e.forumId};J("forum/thumbs-up/merge",f).then(u=>{e.thumbsUp+=u.data.thumbsUpChange,e.thumbsUpType=u.data.thumbsUpType,ElementPlus.ElMessage.success("Thumbs up success")})},M=e=>{ElementPlus.ElMessageBox.confirm("Confirm Delete?","Tips",{type:"warning"}).then(()=>{L("forum",{forumId:e.forumId}).then(()=>{ElementPlus.ElMessage.success("Delete success"),d()})})};return b(),d(),(e,o)=>{const f=Vue.resolveComponent("el-input"),u=Vue.resolveComponent("el-icon"),h=Vue.resolveComponent("el-button"),P=Vue.resolveComponent("el-link"),U=Vue.resolveComponent("el-card"),_=Vue.resolveDirective("infinite-scroll");return Vue.openBlock(),Vue.createElementBlock("div",ee,[Vue.createElementVNode("div",te,[Vue.createElementVNode("div",oe,[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(a).state.label.forum)+" ",1),Vue.createVNode(f,{modelValue:l.value.data.title,"onUpdate:modelValue":o[0]||(o[0]=t=>l.value.data.title=t),onKeyup:Vue.withKeys(q,["enter"]),style:{width:"240px"},placeholder:"Please Input","suffix-icon":Vue.unref(H),"input-style":"margin-left: 5px;"},null,8,["modelValue","onKeyup","suffix-icon"])]),Vue.withDirectives((Vue.openBlock(),Vue.createElementBlock("ul",ne,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(s.value.list||[],(t,g)=>(Vue.openBlock(),Vue.createElementBlock("li",{key:`forum-${g}`,style:{"border-bottom":"1px solid #eeeeee",padding:"20px"}},[Vue.createElementVNode("div",ue,[t.userId===Vue.unref(p).userId?(Vue.openBlock(),Vue.createBlock(u,{key:0,style:{"margin-right":"5px"},onClick:i=>Vue.unref(n).push({path:"/industry/admin/forum",query:{forumId:t.forumId}})},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(R))]),_:2},1032,["onClick"])):Vue.createCommentVNode("",!0),Vue.createElementVNode("h3",{style:{"font-size":"18px"},innerHTML:t.title},null,8,ae)]),r.value[t.forumId]?(Vue.openBlock(),Vue.createElementBlock("div",le,[Vue.createVNode(u,{style:{"margin-right":"5px"}},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(j))]),_:1}),Vue.createTextVNode(" "+Vue.toDisplayString(t.userIdFormat),1)])):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",{style:Vue.normalizeStyle({maxHeight:r.value[t.forumId]?null:"120px",overflowY:"hidden",marginBottom:10,position:"relative"})},[Vue.createElementVNode("div",{innerHTML:t.content,class:"douson-h5"},null,8,se)],4),Vue.createElementVNode("div",re,[Vue.createElementVNode("span",ie,[Vue.createVNode(h,{icon:Vue.unref(z),type:t.thumbsUpType===1?"success":"primary",class:"thumbs-up-btn",onClick:i=>y(t,!0),plain:""},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(a).state.label.agree)+" "+Vue.toDisplayString(t.thumbsUp),1)]),_:2},1032,["icon","type","onClick"]),Vue.createVNode(h,{icon:Vue.unref(K),type:t.thumbsUpType===2?"success":"primary",class:"thumbs-down-btn",onClick:i=>y(t,!1),plain:""},null,8,["icon","type","onClick"]),Vue.createElementVNode("span",{style:{"margin-left":"30px","margin-right":"15px"},class:"icon-text",onClick:i=>m.value[t.forumId]=!m.value[t.forumId]},[Vue.createVNode(u,{style:{"margin-right":"5px"}},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(Q))]),_:1}),Vue.createTextVNode(Vue.toDisplayString(t.commentary)+" 条"+Vue.toDisplayString(Vue.unref(a).state.label.comment),1)],8,ce),Vue.unref(p).username==="admin"||Vue.unref(p).userId===t.userId?(Vue.openBlock(),Vue.createElementBlock("span",{key:0,style:{cursor:"pointer","margin-right":"15px"},class:"icon-text",onClick:i=>M(t)},[Vue.createVNode(u,{style:{"margin-right":"5px"}},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(G))]),_:1}),Vue.createTextVNode(Vue.toDisplayString(Vue.unref(a).state.label.delete),1)],8,de)):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("span",pe,[Vue.createElementVNode("span",{onClick:i=>r.value[t.forumId]=!r.value[t.forumId],class:"icon-text"},[r.value[t.forumId]?(Vue.openBlock(),Vue.createElementBlock("span",me,[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(a).state.label.readSummary)+" ",1),Vue.createVNode(u,{style:{"margin-right":"5px"}},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(O))]),_:1})])):(Vue.openBlock(),Vue.createElementBlock("span",fe,[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(a).state.label.readAll)+" ",1),Vue.createVNode(u,{style:{"margin-right":"5px"}},{default:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(Y))]),_:1})]))],8,Ve)])]),Vue.createElementVNode("div",null,[m.value[t.forumId]?(Vue.openBlock(),Vue.createBlock(X,{key:0,"forum-id":t.forumId},null,8,["forum-id"])):Vue.createCommentVNode("",!0)])]))),128))])),[[_,S]])]),Vue.createElementVNode("div",he,[Vue.createElementVNode("div",ye,[Vue.createVNode(h,{round:"",icon:Vue.unref(W),onClick:o[1]||(o[1]=t=>Vue.unref(n).push({path:"/industry/admin/forum",query:{forumId:""}}))},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(a).state.label.comment),1)]),_:1},8,["icon"])]),Vue.createElementVNode("div",_e,[Vue.createVNode(U,{style:{width:"100%","max-width":"260px"}},{header:Vue.withCtx(()=>[ge]),default:Vue.withCtx(()=>[Vue.withDirectives((Vue.openBlock(),Vue.createElementBlock("ul",xe,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(V.value.list||[],t=>(Vue.openBlock(),Vue.createElementBlock("li",{key:t,class:"infinite-list-item"},[Vue.createVNode(P,{onClick:g=>N(t),class:"mr10",type:"danger"},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(t.label),1)]),_:2},1032,["onClick"])]))),128))])),[[_,k]])]),_:1})])])])}}}),Ce=$(ve,[["__scopeId","data-v-bf07f829"]]);export{Ce as default};
