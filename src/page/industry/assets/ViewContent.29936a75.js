import{v as J,t as K,e as W,g as G}from"./index.c3e79e11.js";import{_ as Q,o as B,i as g,q as T}from"./main.e162c083.js";var n=(u=>(u[u.Expand=0]="Expand",u[u.Text=1]="Text",u[u.Image=2]="Image",u[u.Video=3]="Video",u[u.TextList=4]="TextList",u[u.SerialNoList=5]="SerialNoList",u[u.DeviceRunningTime=6]="DeviceRunningTime",u[u.Valid=7]="Valid",u[u.HighLight=8]="HighLight",u[u.Number=9]="Number",u[u.NumberPositive=10]="NumberPositive",u[u.OrderLink=11]="OrderLink",u[u.DeviceLink=12]="DeviceLink",u[u.Operator=13]="Operator",u[u.FixedText=14]="FixedText",u[u.Attachment=15]="Attachment",u[u.ManagerEdit=16]="ManagerEdit",u[u.TagList=17]="TagList",u[u.Template=18]="Template",u[u.SelectEdit=19]="SelectEdit",u[u.NumberEdit=20]="NumberEdit",u[u.TextEdit=21]="TextEdit",u[u.DateEdit=22]="DateEdit",u))(n||{});const X=Vue.createElementVNode("div",{class:"image-slot"}," \u52A0\u8F7D\u4E2D... ",-1),Z={key:0},ee=["width"],te=["src"],ue=Vue.createTextVNode(" \u60A8\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301 video \u6807\u7B7E\u3002 "),le={key:1},ae={key:1},oe={key:1},ne=Vue.createTextVNode("Detail"),re=Vue.createTextVNode("Start"),ie=Vue.createTextVNode(" Edit "),ce=Vue.createTextVNode(" Delete "),Ve=["href"],se={key:0},ve={key:0},de={key:0},pe={key:0},me=Vue.defineComponent({__name:"ViewContent",props:{idKey:{type:String,required:!0},viewConfig:{type:null,required:!0},row:{type:null,required:!0},fullMessage:{type:Boolean,required:!1,default:!1},handleEdit:{type:Function,required:!1},handleUpdate:{type:Function,required:!1},handleEditShow:{type:Function,required:!1},handleDelete:{type:Function,required:!1},handleShowDetail:{type:Function,required:!1},scale:{type:Number,required:!1,default:1}},emits:[],setup(u,{expose:F,emit:fe}){const r=u,w=VueRouter.useRouter();VueRouter.useRoute();const k=Vuex.useStore(),x=k.state.user,f=k.state.roleCodeList;Vue.ref(!1);const C=Vue.ref(!1),_=Vue.ref(!1),E=Vue.ref(!1),S=Vue.ref(!1),i=Vue.ref({}),U=o=>{C.value=!0,i.value=Object.assign({},o)},j=o=>{_.value=!0,i.value=Object.assign({},o)},O=o=>{E.value=!0,i.value=Object.assign({},o)},q=o=>{S.value=!0,i.value=Object.assign({},o)},M=o=>{const l=e.value.originValue||e.value.value;i.value[l]=T(i.value[l],"yyyy-MM-dd"),y()},y=o=>{if(r.handleUpdate){const l=r.handleUpdate(i.value);l&&l.then&&l.then(m=>{C.value=!1,_.value=!1,E.value=!1,S.value=!1})}else console.log("update func empty...")},z=o=>{w.push({path:"/industry/admin/product/report",query:{productId:o.productId}})},I=o=>{w.push({path:"/industry/admin/product/order",query:{orderId:o.orderId}})},R=o=>{w.push({path:"/industry/admin/product/device",query:{deviceId:o.testDevice}})},A=(o=r.row)=>{const l=[],m=o.userDeviceList||[];for(let V=0;V<m.length;V++){const s=m[V],d=`${s.deviceRunningEndHour}:${s.deviceRunningEndMinute}`,D=`${s.deviceRunningStartHour}:${s.deviceRunningStartMinute}`,h={type:l.length===0?"":"success",hollow:l.length===0,timestamp:d,content:l.length===0?`Stop work(${o.deviceUseMinute}m)`:`Working(+${s.deviceRunningMinute}m)`};V>0&&l[l.length-1].timestamp===d?l[l.length-1]=h:l.push(h),l.push({type:V<m.length-1?"danger":"",hollow:V>=m.length-1,timestamp:D,wrongData:V<m.length-1,content:"Start work"})}return l},e=Vue.ref(r.viewConfig),t=Vue.ref(r.row),N=r.handleEdit,b=r.handleEditShow,L=r.handleDelete,c=Vue.ref(r.scale||1);return F({}),Vue.watch(()=>r.viewConfig,o=>{e.value=Object.assign({},o)},{immediate:!0}),Vue.watch(()=>r.scale,o=>{c.value=o},{immediate:!0}),Vue.watch(()=>r.row,o=>{t.value=Object.assign({},o)},{immediate:!0}),(o,l)=>{const m=Vue.resolveComponent("el-image"),V=Vue.resolveComponent("el-empty"),s=Vue.resolveComponent("el-space"),d=Vue.resolveComponent("el-tag"),D=Vue.resolveComponent("el-timeline-item"),h=Vue.resolveComponent("el-timeline"),v=Vue.resolveComponent("el-link"),H=Vue.resolveComponent("el-option"),Y=Vue.resolveComponent("el-select"),$=Vue.resolveComponent("el-input"),P=Vue.resolveComponent("el-date-picker");return Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[e.value.type===Vue.unref(n).Expand?Vue.renderSlot(o.$slots,"expand",{key:0,param:t.value}):e.value.type===Vue.unref(n).Image?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:1},[Vue.createCommentVNode(`    <el-image\r
            v-if="row[viewConfig.value] && row[viewConfig.value].length > 0"\r
            :src="fullUrl(row[viewConfig.value][0].photoCompressUrl, '')"\r
            fit="cover"\r
            :preview-src-list="row[viewConfig.value].map(t => fullUrl(t.photoUrl, ''))"\r
            :initial-index="0"\r
            teleported="false"\r
            style="width: 100px;"\r
        />`),Vue.createVNode(s,{wrap:"",style:{"justify-content":"center"}},{default:Vue.withCtx(()=>[t.value[e.value.value]&&t.value[e.value.value].length>0?(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,{key:0},Vue.renderList(t.value[e.value.value],(a,p)=>(Vue.openBlock(),Vue.createBlock(m,{src:Vue.unref(B)(a.photoCompressUrl,""),fit:"cover","preview-src-list":[Vue.unref(B)(a.photoUrl,"")],"initial-index":0,teleported:"false",style:Vue.normalizeStyle({width:`${155/c.value}px`})},{placeholder:Vue.withCtx(()=>[X]),_:2},1032,["src","preview-src-list","style"]))),256)):(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:1},[Vue.createCommentVNode(`<el-space><img v-if="row.photoList.length > 0"\r
           v-for="t in row.photoList"\r
           :key="t.photoUrl" :src="fullUrl(t.photoUrl, '')"\r
           alt="picture"\r
           style="width: 300px;"/></el-space>`),Vue.createVNode(V,{description:"Empty",style:Vue.normalizeStyle({width:`${155/c.value}px`,height:`${160/c.value}px`,marginTop:`${30/c.value}px`,marginBottom:`${30/c.value}px`})},null,8,["style"])],2112))]),_:1})],64)):Vue.createCommentVNode("v-if",!0),e.value.type===Vue.unref(n).Video?(Vue.openBlock(),Vue.createBlock(s,{key:2,wrap:"",style:{"justify-content":"center"}},{default:Vue.withCtx(()=>[t.value[e.value.value]&&t.value[e.value.value].length>0?(Vue.openBlock(),Vue.createElementBlock("div",Z,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(t.value[e.value.value],a=>(Vue.openBlock(),Vue.createElementBlock("video",{key:a.videoUrl,width:`${155/c.value}`,controls:""},[Vue.createCommentVNode(':type="`video/${temp.extension}`"'),Vue.createElementVNode("source",{src:Vue.unref(B)(a.videoUrl,""),type:"video/mp4"},null,8,te),ue],8,ee))),128))])):(Vue.openBlock(),Vue.createBlock(V,{key:1,description:"Empty",style:Vue.normalizeStyle({width:`${155/c.value}px`,height:`${160/c.value}px`})},null,8,["style"]))]),_:1})):e.value.type===Vue.unref(n).TextList?(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,{key:3},Vue.renderList(t.value[e.value.value],a=>(Vue.openBlock(),Vue.createElementBlock("div",{key:a},Vue.toDisplayString(`${a}`),1))),128)):e.value.type===Vue.unref(n).TagList?(Vue.openBlock(),Vue.createBlock(s,{key:4,wrap:"",style:{display:"flex","justify-content":"center"}},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(t.value[e.value.value],a=>(Vue.openBlock(),Vue.createBlock(d,{key:a},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(`${a}`),1)]),_:2},1024))),128))]),_:1})):e.value.type===Vue.unref(n).SerialNoList?(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,{key:5},Vue.renderList(t.value[e.value.value],a=>(Vue.openBlock(),Vue.createElementBlock("div",{key:a},Vue.toDisplayString(`${t.value.orderNo}-${t.value.projectSequence}-${a}`),1))),128)):e.value.type===Vue.unref(n).DeviceRunningTime?(Vue.openBlock(),Vue.createBlock(h,{key:6,style:{"max-width":"600px","margin-top":"5px"}},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(A(t.value),(a,p)=>(Vue.openBlock(),Vue.createBlock(D,{key:p,type:a.type,hollow:a.hollow,timestamp:a.timestamp,size:"normal"},{default:Vue.withCtx(()=>[a.wrongData?(Vue.openBlock(),Vue.createBlock(d,{key:0,type:"danger"},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(a.content),1)]),_:2},1024)):(Vue.openBlock(),Vue.createElementBlock("span",le,Vue.toDisplayString(a.content),1))]),_:2},1032,["type","hollow","timestamp"]))),128))]),_:1})):e.value.type===Vue.unref(n).Valid?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:7},[Vue.createTextVNode(Vue.toDisplayString(t.value[e.value.value]?"\u7ED3\u6848":"\u5BA1\u6279\u4E2D"),1)],64)):e.value.type===Vue.unref(n).HighLight?(Vue.openBlock(),Vue.createBlock(d,{key:8,type:"",size:"small"},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(t.value[e.value.value]),1)]),_:1})):e.value.type===Vue.unref(n).Number?(Vue.openBlock(),Vue.createBlock(d,{key:9,type:t.value[e.value.value]>=0?"":"danger",size:"small"},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(t.value[e.value.value]),1)]),_:1},8,["type"])):e.value.type===Vue.unref(n).NumberPositive?(Vue.openBlock(),Vue.createBlock(d,{key:10,type:t.value[e.value.value]>0?"":"danger",size:"small"},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(t.value[e.value.value]),1)]),_:1},8,["type"])):e.value.type===Vue.unref(n).OrderLink?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:11},[Vue.unref(g)(Vue.unref(f),"admin")?(Vue.openBlock(),Vue.createBlock(v,{key:0,onClick:l[0]||(l[0]=a=>I(t.value)),type:"danger"},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(t.value[e.value.value]),1)]),_:1})):(Vue.openBlock(),Vue.createElementBlock("span",ae,Vue.toDisplayString(t.value[e.value.value]),1))],64)):e.value.type===Vue.unref(n).DeviceLink?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:12},[Vue.unref(g)(Vue.unref(f),"admin")?(Vue.openBlock(),Vue.createBlock(v,{key:0,onClick:l[1]||(l[1]=a=>R(t.value)),type:"danger"},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(t.value[e.value.value]),1)]),_:1})):(Vue.openBlock(),Vue.createElementBlock("span",oe,Vue.toDisplayString(t.value[e.value.value]),1))],64)):e.value.type===Vue.unref(n).Operator?(Vue.openBlock(),Vue.createBlock(s,{key:13,wrap:"",style:{"justify-content":"center"}},{default:Vue.withCtx(()=>[Vue.renderSlot(o.$slots,"operator",{param:t.value}),r.handleShowDetail?(Vue.openBlock(),Vue.createBlock(v,{key:0,icon:Vue.unref(J),onClick:l[2]||(l[2]=a=>r.handleShowDetail(t.value)),class:"mr10",type:"success"},{default:Vue.withCtx(()=>[Vue.createVNode(d,{size:"small"},{default:Vue.withCtx(()=>[ne]),_:1})]),_:1},8,["icon"])):Vue.createCommentVNode("v-if",!0),r.idKey==="productId"&&(Vue.unref(g)(Vue.unref(f),"user")||Vue.unref(g)(Vue.unref(f),"admin"))?(Vue.openBlock(),Vue.createBlock(v,{key:1,icon:Vue.unref(K),onClick:l[3]||(l[3]=a=>z(t.value)),class:"mr10",type:"warning"},{default:Vue.withCtx(()=>[Vue.createVNode(d,{size:"small"},{default:Vue.withCtx(()=>[re]),_:1})]),_:1},8,["icon"])):Vue.createCommentVNode("v-if",!0),(!Vue.unref(b)||Vue.unref(b)(t.value))&&Vue.unref(N)&&(Vue.unref(x).userId==="admin"||!t.value.valid)?(Vue.openBlock(),Vue.createBlock(v,{key:2,icon:Vue.unref(W),onClick:l[4]||(l[4]=a=>Vue.unref(N)(t.value)),class:"mr10",type:"warning"},{default:Vue.withCtx(()=>[ie]),_:1},8,["icon"])):Vue.createCommentVNode("v-if",!0),Vue.unref(L)&&!t.value.valid&&(Vue.unref(x).userId===t.value.userId||Vue.unref(x).userId===t.value.creator||Vue.unref(g)(Vue.unref(f),"admin"))?(Vue.openBlock(),Vue.createBlock(v,{key:3,icon:Vue.unref(G),onClick:l[5]||(l[5]=a=>Vue.unref(L)(t.value)),type:"danger"},{default:Vue.withCtx(()=>[ce]),_:1},8,["icon"])):Vue.createCommentVNode("v-if",!0)]),_:3})):e.value.type===Vue.unref(n).FixedText?(Vue.openBlock(),Vue.createElementBlock("div",{key:14,style:Vue.normalizeStyle({maxHeight:`${r.fullMessage?99999:90}px`,overflowY:"auto"})},Vue.toDisplayString(t.value[e.value.value]),5)):e.value.type===Vue.unref(n).Attachment?(Vue.openBlock(),Vue.createBlock(s,{key:15,wrap:"",style:{"justify-content":"center"}},{default:Vue.withCtx(()=>[t.value[e.value.value]&&t.value[e.value.value].length>0?(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,{key:0},Vue.renderList(t.value[e.value.value],(a,p)=>(Vue.openBlock(),Vue.createElementBlock("a",{href:Vue.unref(B)(a.url,""),style:Vue.normalizeStyle({minWidth:`${155/c.value}px`})},Vue.toDisplayString(a.filename),13,Ve))),256)):(Vue.openBlock(),Vue.createBlock(V,{key:1,description:"Empty",style:Vue.normalizeStyle({width:`${155/c.value}px`,height:`${160/c.value}px`,marginTop:`${30/c.value}px`,marginBottom:`${30/c.value}px`})},null,8,["style"]))]),_:1})):e.value.type===Vue.unref(n).ManagerEdit?(Vue.openBlock(),Vue.createBlock(v,{key:16,onClick:l[6]||(l[6]=()=>{e.value.managerEdit&&e.value.managerEdit(t.value)}),type:"danger"},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(t.value[e.value.value]||"--"),1)]),_:1})):e.value.type===Vue.unref(n).Template?Vue.renderSlot(o.$slots,"template",{key:17,param:t.value,viewConfig:e.value}):e.value.type===Vue.unref(n).SelectEdit?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:18},[r.handleUpdate?C.value?(Vue.openBlock(),Vue.createBlock(Y,{key:2,modelValue:i.value[e.value.originValue||e.value.value],"onUpdate:modelValue":l[8]||(l[8]=a=>i.value[e.value.originValue||e.value.value]=a),onChange:y,filterable:"",multiple:Object.prototype.toString.call(i.value[e.value.originValue||e.value.value])==="[object Array]",clearable:"",placeholder:Vue.unref(k).state.label[e.value.originValue||e.value.value]},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(e.value.optionList||[],a=>(Vue.openBlock(),Vue.createBlock(H,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","multiple","placeholder"])):(Vue.openBlock(),Vue.createBlock(v,{key:1,"automatic-dropdown":"true",onClick:l[7]||(l[7]=()=>U(t.value)),type:"warning"},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString((e.value.optionList||[]).reduce((a,p)=>p.value===t.value[e.value.value]?p.label:a,t.value[e.value.value])||"--"),1)]),_:1})):(Vue.openBlock(),Vue.createElementBlock("span",se,Vue.toDisplayString((e.value.optionList||[]).reduce((a,p)=>p.value===t.value[e.value.value]?p.label:a,t.value[e.value.value])||"--"),1))],64)):e.value.type===Vue.unref(n).NumberEdit?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:19},[r.handleUpdate?_.value?(Vue.openBlock(),Vue.createBlock($,{key:2,type:"number",modelValue:i.value[e.value.originValue||e.value.value],"onUpdate:modelValue":l[10]||(l[10]=a=>i.value[e.value.originValue||e.value.value]=a),onChange:y,placeholder:Vue.unref(k).state.label[e.value.originValue||e.value.value],clearable:""},null,8,["modelValue","placeholder"])):(Vue.openBlock(),Vue.createBlock(v,{key:1,"automatic-dropdown":"true",onClick:l[9]||(l[9]=()=>j(t.value)),type:"warning"},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(t.value[e.value.value]||"--"),1)]),_:1})):(Vue.openBlock(),Vue.createElementBlock("span",ve,Vue.toDisplayString(t.value[e.value.value]||"--"),1))],64)):e.value.type===Vue.unref(n).TextEdit?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:20},[r.handleUpdate?E.value?(Vue.openBlock(),Vue.createBlock($,{key:2,type:"textarea",rows:4,modelValue:i.value[e.value.originValue||e.value.value],"onUpdate:modelValue":l[12]||(l[12]=a=>i.value[e.value.originValue||e.value.value]=a),onChange:y,placeholder:Vue.unref(k).state.label[e.value.originValue||e.value.value],clearable:""},null,8,["modelValue","placeholder"])):(Vue.openBlock(),Vue.createBlock(v,{key:1,"automatic-dropdown":"true",onClick:l[11]||(l[11]=()=>O(t.value)),type:"warning"},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(t.value[e.value.value]||"--"),1)]),_:1})):(Vue.openBlock(),Vue.createElementBlock("span",de,Vue.toDisplayString(t.value[e.value.value]||"--"),1))],64)):e.value.type===Vue.unref(n).DateEdit?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:21},[r.handleUpdate?S.value?(Vue.openBlock(),Vue.createBlock(P,{key:2,style:{width:"95%"},type:"date",modelValue:i.value[e.value.originValue||e.value.value],"onUpdate:modelValue":l[14]||(l[14]=a=>i.value[e.value.originValue||e.value.value]=a),format:"YYYY-MM-DD",clearable:"",onChange:M},null,8,["modelValue"])):(Vue.openBlock(),Vue.createBlock(v,{key:1,"automatic-dropdown":"true",onClick:l[13]||(l[13]=()=>q(t.value)),type:"warning"},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(t.value[e.value.value]||"--"),1)]),_:1})):(Vue.openBlock(),Vue.createElementBlock("span",pe,Vue.toDisplayString(t.value[e.value.value]||"--"),1))],64)):e.value.type===null||e.value.type===void 0||e.value.type===Vue.unref(n).Text?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:22},[Vue.createTextVNode(Vue.toDisplayString(t.value[e.value.value]),1)],64)):Vue.createCommentVNode("v-if",!0)],64)}}});var ke=Q(me,[["__file","D:/code/mp-server/src/page/src/page/industry/component/ViewContent.vue"]]),he=Object.freeze(Object.defineProperty({__proto__:null,default:ke},Symbol.toStringTag,{value:"Module"}));export{n as V,ke as a,he as b};
