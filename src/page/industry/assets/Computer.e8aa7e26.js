import{s as G,p as J,h as Q}from"./index.c3e79e11.js";import{i as f,h as C,q as H,v as W,b as X,a as Z,_ as ee}from"./main.e162c083.js";import{D as te,a as le}from"./Common.00b9c206.js";import{V as x}from"./ViewContent.29936a75.js";import ae from"./ViewList.301fe670.js";import ue from"./ImageUpload.ffae63c6.js";import"./IndustryUtil.35abe8a4.js";import"./TableViewContent.c1fd5c92.js";import"./TableColumnViewContent.779ce4dc.js";var oe="/industry/assets/douson.e45929d2.png";const re={class:"query-container"},ne={class:"query-btn"},de=Vue.createTextVNode("Search"),se=Vue.createTextVNode("Add "),Ve=Vue.createTextVNode("Print"),ie={class:"dialog-footer"},me=Vue.createTextVNode("Cancel"),ce=Vue.createTextVNode("Confirm"),pe={style:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center","margin-bottom":"20px"}},fe={style:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",width:"585px"}},be=Vue.createElementVNode("h1",{style:{"text-align":"center",height:"50px",position:"relative",width:"100%"}},[Vue.createElementVNode("img",{src:oe,style:{position:"absolute",height:"100%",left:"10px",top:"0px"}}),Vue.createElementVNode("span",{style:{"font-size":"36px",color:"#ff0000"}},"ASSET CARD \u8D22\u4EA7\u5361"),Vue.createElementVNode("br")],-1),he=Vue.createTextVNode("` "),ge=Vue.createTextVNode(" M\xE3 thi\u1EBFt b\u1ECB \u8BBE\u5907\u7269\u6599\u53F7 "),Ne=Vue.createTextVNode(" Ng\u01B0\u1EDDi S\u1EED D\u1EE5ng \u7528\u6237 "),ve=Vue.createTextVNode(" V\u1ECB tr\xED \u4F4D\u7F6E "),we=Vue.createTextVNode(" B\u1ED9 Ph\u1EADn \u90E8\u95E8 ");var Ce=Vue.defineComponent({__name:"Computer",setup(xe){VueRouter.useRouter();const l=Vuex.useStore(),E=l.state.user,m=l.state.roleCodeList,N=Vue.ref(!1),c=Vue.ref(null),_=Vue.ref(null),v=Vue.ref(new Array),w=Vue.ref([{value:"expand",label:"",width:48,type:x.Expand},{value:"operator",labelKey:"viewAndEdit",width:312,type:x.Operator},{value:"index",labelKey:"index",width:51},{value:"materialNo",labelKey:"materialNo",width:189},{value:"brand",labelKey:"brand",width:96},{value:"computerNameFormat",labelKey:"computerName",width:189},{value:"model",labelKey:"computerModel",width:293,showOverflow:!0},{value:"departmentFormat",labelKey:"department",width:168},{value:"userChineseName",labelKey:"chineseName",width:190},{value:"professionFormat",labelKey:"profession",width:268},{value:"positionFormat",labelKey:"position",width:96},{value:"storageDate",labelKey:"storageDate",width:102},{value:"computerStateFormat",labelKey:"computerState",width:168},{value:"detailedFormat",labelKey:"detailed",width:96},{value:"productPlace",labelKey:"productPlace",width:96},{value:"supplier",labelKey:"supplier",width:96},{value:"remark",labelKey:"remark",width:169,showOverflow:!0},{value:"photoList",labelKey:"photo",type:x.Image,width:96}]);!f(m,"admin")&&!f(m,"manager")&&(w.value=w.value.map(u=>(u.value==="dealOpinion"&&(u.children=(u.children||[]).filter(t=>t.value!=="fineAmountFormat")),u))),C("system/user/config/list",{}).then(u=>{o.userConfigList=u.list||[],v.value=o.userConfigList.map(t=>({value:t.userId,label:t.name}))});const y={creator:E.userId,index:"",computerId:"",materialNo:"",brand:"",computerName:"",model:"",userId:"",position:"",storageDate:"",computerState:"",detailed:null,productPlace:"",supplier:"",remark:"",photoList:new Array},o=Vue.reactive({dateTimeList:[],photoVisible:!1,photoList:new Array,userConfigList:new Array,expandRowKeys:new Array,query:{data:{userId:"",startDueDate:"",endDueDate:"",deviceNumber:"",specification:"",chineseVietnamName:"",deviceCheckLedgerState:"",borrower:"",storage:"",outOfStock:null},page:{page:te,limit:le}},tableData:new Array,total:0,formData:Object.assign({},y),formSave:!1,config:{computerNameList:[],companyPositionList:[],computerStateList:[]},formVisible:!1,managerEdit:!1,formRuleList:{materialNo:[{required:!0,message:"Please check",trigger:"blur"}],brand:[{required:!0,message:"Please check",trigger:"blur"}],computerName:[{required:!0,message:"Please check",trigger:"blur"}],model:[{required:!0,message:"Please check",trigger:"blur"}],userId:[{required:!0,message:"Please check",trigger:"blur"}],storageDate:[{required:!0,message:"Please check",trigger:"blur"}],computerState:[{required:!0,message:"Please check",trigger:"blur"}],detailed:[{required:!0,message:"Please check",trigger:"blur"}],productPlace:[{required:!0,message:"Please check",trigger:"blur"}],photoList:[{required:!1,type:"array",min:0,max:3}]}}),D=u=>{c.value=Object.assign({},u.param||{}),N.value=!0};C("douson/config",{categoryIdList:["computerName","companyPosition","computerState"]}).then(u=>{o.config=u.data});const n=()=>{C("douson/admin/computer/page",o.query).then(u=>{o.tableData=u.list,o.total=u.total,ElementPlus.ElMessage.success("Query success")})},L=u=>{o.query.page.page=u,n()},B=u=>{o.query.page.limit=u,n()};n();const P=()=>{o.formData=Object.assign({},y),o.formVisible=!0,o.formSave=!0},S=(u,t=!1)=>{o.managerEdit=t,o.formVisible=!0,o.formSave=!1,o.formData=Object.assign({},u)},U=u=>f(m,"admin")||f(m,"itManager")?!0:u.creator===l.state.user.userId,F=()=>{_.value.validate(u=>{u&&(o.formSave?W("douson/admin/computer",o.formData).then(()=>{o.formVisible=!1,ElementPlus.ElMessage.success("Add success"),n()}):k(o.formData))})},k=u=>X("douson/admin/computer",u).then(()=>{o.formVisible=!1,ElementPlus.ElMessage.success("Update success"),n()}),T=u=>{ElementPlus.ElMessageBox.confirm("Confirm Delete?","Tips",{type:"warning"}).then(()=>{Z("douson/admin/computer",{computerId:u.computerId}).then(()=>{ElementPlus.ElMessage.success("Delete success"),n()})})},{expandRowKeys:_e,query:r,tableData:I,config:p,userConfigList:ye,total:K,dateTimeList:ke,formData:a,formSave:A,formVisible:b,managerEdit:Ee,formRuleList:q,photoVisible:De,photoList:Le}={...Vue.toRefs(o)};return(u,t)=>{const s=Vue.resolveComponent("el-option"),V=Vue.resolveComponent("el-select"),i=Vue.resolveComponent("el-input"),h=Vue.resolveComponent("el-button"),M=Vue.resolveComponent("el-tag"),R=Vue.resolveComponent("el-link"),d=Vue.resolveComponent("el-form-item"),O=Vue.resolveComponent("el-date-picker"),j=Vue.resolveComponent("el-form"),Y=Vue.resolveComponent("el-dialog"),g=Vue.resolveComponent("el-descriptions-item"),z=Vue.resolveComponent("el-descriptions"),$=Vue.resolveComponent("el-drawer");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createElementVNode("div",re,[Vue.createVNode(V,{modelValue:Vue.unref(r).data.userId,"onUpdate:modelValue":t[0]||(t[0]=e=>Vue.unref(r).data.userId=e),onChange:n,filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(l).state.label.chineseName,class:"search-item"},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(v.value,e=>(Vue.openBlock(),Vue.createBlock(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),Vue.createVNode(i,{modelValue:Vue.unref(r).data.brand,"onUpdate:modelValue":t[1]||(t[1]=e=>Vue.unref(r).data.brand=e),onChange:n,placeholder:Vue.unref(l).state.label.brand,class:"search-item"},null,8,["modelValue","placeholder"]),Vue.createVNode(V,{modelValue:Vue.unref(r).data.computerName,"onUpdate:modelValue":t[2]||(t[2]=e=>Vue.unref(r).data.computerName=e),onChange:n,filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(l).state.label.computerName,class:"search-item"},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(p).computerNameList,e=>(Vue.openBlock(),Vue.createBlock(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),Vue.createVNode(i,{modelValue:Vue.unref(r).data.materialNo,"onUpdate:modelValue":t[3]||(t[3]=e=>Vue.unref(r).data.materialNo=e),onChange:n,placeholder:Vue.unref(l).state.label.materialNo,class:"search-item"},null,8,["modelValue","placeholder"]),Vue.createVNode(i,{modelValue:Vue.unref(r).data.model,"onUpdate:modelValue":t[4]||(t[4]=e=>Vue.unref(r).data.model=e),onChange:n,placeholder:Vue.unref(l).state.label.computerModel,class:"search-item"},null,8,["modelValue","placeholder"]),Vue.createVNode(V,{modelValue:Vue.unref(r).data.position,"onUpdate:modelValue":t[5]||(t[5]=e=>Vue.unref(r).data.position=e),onChange:n,clearable:"",placeholder:Vue.unref(l).state.label.position},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(p).companyPositionList,e=>(Vue.openBlock(),Vue.createBlock(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),Vue.createVNode(V,{modelValue:Vue.unref(r).data.detailed,"onUpdate:modelValue":t[6]||(t[6]=e=>Vue.unref(r).data.detailed=e),onChange:n,clearable:"",placeholder:Vue.unref(l).state.label.detailed},{default:Vue.withCtx(()=>[Vue.createVNode(s,{label:"Yes",value:!0}),Vue.createVNode(s,{label:"No",value:!1})]),_:1},8,["modelValue","placeholder"]),Vue.createElementVNode("div",ne,[Vue.createVNode(h,{icon:Vue.unref(G),onClick:n,type:"primary"},{default:Vue.withCtx(()=>[de]),_:1},8,["icon"]),Vue.createVNode(h,{icon:Vue.unref(J),onClick:P,type:"success"},{default:Vue.withCtx(()=>[se]),_:1},8,["icon"]),Vue.createCommentVNode('<el-button :icon="Plus" @click="handleSaveModal" type="success">Add</el-button>')])]),Vue.createVNode(ae,{idKey:"computerId",columnConfigList:w.value,list:Vue.unref(I),handleEdit:S,handleUpdate:k,handleEditShow:U,handleDelete:Vue.unref(f)(Vue.unref(m),"admin")?T:null,page:Vue.unref(r).page,total:Vue.unref(K),handlePageChange:L,handleLimitChange:B},{operator:Vue.withCtx(e=>[Vue.createVNode(R,{icon:Vue.unref(Q),onClick:Be=>D(e),class:"mr10",type:"info"},{default:Vue.withCtx(()=>[Vue.createVNode(M,{size:"small"},{default:Vue.withCtx(()=>[Ve]),_:1})]),_:2},1032,["icon","onClick"])]),_:1},8,["columnConfigList","list","handleDelete","page","total"]),Vue.createVNode(Y,{title:Vue.unref(A)?"Add":"Edit",modelValue:Vue.unref(b),"onUpdate:modelValue":t[21]||(t[21]=e=>Vue.isRef(b)?b.value=e:null),width:"60%","close-on-click-modal":!1},{footer:Vue.withCtx(()=>[Vue.createElementVNode("span",ie,[Vue.createVNode(h,{onClick:t[20]||(t[20]=e=>b.value=!1)},{default:Vue.withCtx(()=>[me]),_:1}),Vue.createVNode(h,{type:"primary",onClick:F},{default:Vue.withCtx(()=>[ce]),_:1})])]),default:Vue.withCtx(()=>[Vue.createVNode(j,{rules:Vue.unref(q),model:Vue.unref(a),ref_key:"formRef",ref:_,"label-width":"auto","label-position":"top"},{default:Vue.withCtx(()=>[Vue.createVNode(d,{prop:"materialNo",label:Vue.unref(l).state.label.materialNo},{default:Vue.withCtx(()=>[Vue.createVNode(i,{modelValue:Vue.unref(a).materialNo,"onUpdate:modelValue":t[7]||(t[7]=e=>Vue.unref(a).materialNo=e)},null,8,["modelValue"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"brand",label:Vue.unref(l).state.label.brand},{default:Vue.withCtx(()=>[Vue.createVNode(i,{modelValue:Vue.unref(a).brand,"onUpdate:modelValue":t[8]||(t[8]=e=>Vue.unref(a).brand=e)},null,8,["modelValue"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"computerName",label:Vue.unref(l).state.label.computerName},{default:Vue.withCtx(()=>[Vue.createVNode(V,{modelValue:Vue.unref(a).computerName,"onUpdate:modelValue":t[9]||(t[9]=e=>Vue.unref(a).computerName=e),filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(l).state.label.computerName},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(p).computerNameList,e=>(Vue.openBlock(),Vue.createBlock(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"model",label:Vue.unref(l).state.label.computerModel},{default:Vue.withCtx(()=>[Vue.createVNode(i,{modelValue:Vue.unref(a).model,"onUpdate:modelValue":t[10]||(t[10]=e=>Vue.unref(a).model=e)},null,8,["modelValue"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"userId",label:Vue.unref(l).state.label.user},{default:Vue.withCtx(()=>[Vue.createVNode(V,{modelValue:Vue.unref(a).userId,"onUpdate:modelValue":t[11]||(t[11]=e=>Vue.unref(a).userId=e),filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(l).state.label.user},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(v.value,e=>(Vue.openBlock(),Vue.createBlock(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"position",label:Vue.unref(l).state.label.position},{default:Vue.withCtx(()=>[Vue.createVNode(V,{modelValue:Vue.unref(a).position,"onUpdate:modelValue":t[12]||(t[12]=e=>Vue.unref(a).position=e),filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(l).state.label.position},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(p).companyPositionList,e=>(Vue.openBlock(),Vue.createBlock(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"storageDate",label:Vue.unref(l).state.label.storageDate},{default:Vue.withCtx(()=>[Vue.createVNode(O,{type:"date",modelValue:Vue.unref(a).storageDate,"onUpdate:modelValue":t[13]||(t[13]=e=>Vue.unref(a).storageDate=e),format:"YYYY-MM-DD",onChange:t[14]||(t[14]=e=>Vue.unref(a).storageDate=Vue.unref(H)(Vue.unref(a).storageDate,"yyyy-MM-dd"))},null,8,["modelValue"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"computerState",label:Vue.unref(l).state.label.computerState},{default:Vue.withCtx(()=>[Vue.createVNode(V,{modelValue:Vue.unref(a).computerState,"onUpdate:modelValue":t[15]||(t[15]=e=>Vue.unref(a).computerState=e),filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(l).state.label.computerState},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(p).computerStateList,e=>(Vue.openBlock(),Vue.createBlock(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"detailed",label:Vue.unref(l).state.label.detailed},{default:Vue.withCtx(()=>[Vue.createVNode(V,{modelValue:Vue.unref(a).detailed,"onUpdate:modelValue":t[16]||(t[16]=e=>Vue.unref(a).detailed=e),filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(l).state.label.detailed},{default:Vue.withCtx(()=>[Vue.createVNode(s,{label:"Yes",value:!0}),Vue.createVNode(s,{label:"No",value:!1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"productPlace",label:Vue.unref(l).state.label.productPlace},{default:Vue.withCtx(()=>[Vue.createVNode(i,{modelValue:Vue.unref(a).productPlace,"onUpdate:modelValue":t[17]||(t[17]=e=>Vue.unref(a).productPlace=e)},null,8,["modelValue"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"supplier",label:Vue.unref(l).state.label.supplier},{default:Vue.withCtx(()=>[Vue.createVNode(i,{modelValue:Vue.unref(a).supplier,"onUpdate:modelValue":t[18]||(t[18]=e=>Vue.unref(a).supplier=e)},null,8,["modelValue"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"remark",label:Vue.unref(l).state.label.remark},{default:Vue.withCtx(()=>[Vue.createVNode(i,{modelValue:Vue.unref(a).remark,"onUpdate:modelValue":t[19]||(t[19]=e=>Vue.unref(a).remark=e)},null,8,["modelValue"])]),_:1},8,["label"]),Vue.createVNode(d,{prop:"photoList",label:Vue.unref(l).state.label.photo},{default:Vue.withCtx(()=>[Vue.createVNode(ue,{photoList:Vue.unref(a).photoList,maxSize:3},null,8,["photoList"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"]),Vue.createVNode($,{modelValue:N.value,"onUpdate:modelValue":t[22]||(t[22]=e=>N.value=e),size:"100%","append-to-body":!0,"lock-scroll":!1,"modal-class":"print-drawer","z-index":99999},{default:Vue.withCtx(()=>[Vue.createElementVNode("div",pe,[Vue.createElementVNode("div",fe,[be,Vue.createVNode(z,{column:1,style:{width:"100%"},border:""},{default:Vue.withCtx(()=>[he,Vue.createVNode(g,{label:Vue.unref(l).state.label.materialNo,align:"center","label-class-name":"box-print-label"},{label:Vue.withCtx(()=>[ge]),default:Vue.withCtx(()=>[Vue.createTextVNode(" "+Vue.toDisplayString(c.value.materialNo),1)]),_:1},8,["label"]),Vue.createVNode(g,{label:Vue.unref(l).state.label.chineseName,align:"center","label-class-name":"box-print-label"},{label:Vue.withCtx(()=>[Ne]),default:Vue.withCtx(()=>[Vue.createTextVNode(" "+Vue.toDisplayString(c.value.userChineseName),1)]),_:1},8,["label"]),Vue.createVNode(g,{label:Vue.unref(l).state.label.position,align:"center","label-class-name":"box-print-label"},{label:Vue.withCtx(()=>[ve]),default:Vue.withCtx(()=>[Vue.createTextVNode(" "+Vue.toDisplayString(c.value.positionFormat),1)]),_:1},8,["label"]),Vue.createVNode(g,{label:Vue.unref(l).state.label.department,align:"center","label-class-name":"box-print-label"},{label:Vue.withCtx(()=>[we]),default:Vue.withCtx(()=>[Vue.createTextVNode(" "+Vue.toDisplayString(c.value.departmentFormat),1)]),_:1},8,["label"])]),_:1})])])]),_:1},8,["modelValue"])])}}}),Me=ee(Ce,[["__file","D:/code/mp-server/src/page/src/page/industry/admin/asset/Computer.vue"]]);export{Me as default};
