import{s as B}from"./index.c3e79e11.js";import{h as v,i as K,v as U,b as j,_ as F}from"./main.e162c083.js";import{D as R,a as A}from"./Common.00b9c206.js";import I from"./ViewList.301fe670.js";import{V as T}from"./ViewContent.29936a75.js";import"./IndustryUtil.35abe8a4.js";import"./TableViewContent.c1fd5c92.js";import"./TableColumnViewContent.779ce4dc.js";const M={class:"query-container"},O={class:"query-btn"},G=Vue.createTextVNode("Search"),J={class:"dialog-footer"},$=Vue.createTextVNode("Cancel"),Q=Vue.createTextVNode("Confirm");var z=Vue.defineComponent({__name:"Order",setup(H){const r=Vuex.useStore(),g=r.state.roleCodeList;VueRouter.useRouter();const C=VueRouter.useRoute(),f=Vue.ref(null),h=String(C.query.orderId||""),l=Vue.reactive({query:{data:{orderId:"",testDevice:"",orderNo:"",designNumber:"",projectSequence:""},page:{page:R,limit:A}},config:{processProcedureList:[],testDeviceList:[]},total:0,tableData:new Array,formData:{orderId:"",orderNo:"",projectSequence:"",testDevice:"",processProcedure:"",orderCount:0},formSave:!1,formVisible:!1,formRuleList:{orderCount:[{required:!0,message:"\u8BF7\u8F93\u5165",trigger:"blur"}]}}),a=()=>b(""),b=(u="")=>{l.query.data.orderId=u,v("douson/admin/order/page",l.query).then(t=>{l.total=t.total;const d=t.list||[];l.tableData=d,u&&d.length>0&&(l.formVisible=!0,l.formData=Object.assign({},d[0])),ElementPlus.ElMessage.success("Query success")})};b(h);const N=(u,t=0)=>{l.formVisible=!0,l.formSave=!1,l.formData=Object.assign({},u)},_=()=>{f.value.validate(u=>{u&&(l.formSave?U("douson/admin/order",l.formData).then(()=>{l.formVisible=!1,ElementPlus.ElMessage.success("Add success"),a()}):j("douson/admin/order",l.formData).then(()=>{l.formVisible=!1,ElementPlus.ElMessage.success("Update success"),a()}))})},y=u=>{l.query.page.page=u,a()},w=u=>{l.query.page.limit=u,a()};v("douson/config").then(u=>{l.config=u.data});const D=Vue.ref([{value:"orderNo",labelKey:"orderNo",width:128,align:"left"},{value:"projectSequence",labelKey:"projectSequence",width:128,align:"left"},{value:"testDeviceFormat",labelKey:"testDevice",width:160,align:"left"},{value:"processProcedureFormat",labelKey:"processProcedure",width:128,align:"left"},{value:"orderCount",labelKey:"orderCount",width:128,align:"center"},{value:"designNumber",labelKey:"designNumber",width:160,align:"left"},{value:"operator",labelKey:"viewAndEdit",width:289,type:T.Operator}]),{query:n,config:c,total:k,tableData:x,formData:o,formSave:q,formVisible:V,formRuleList:E}={...Vue.toRefs(l)};return(u,t)=>{const d=Vue.resolveComponent("el-input"),i=Vue.resolveComponent("el-option"),m=Vue.resolveComponent("el-select"),p=Vue.resolveComponent("el-button"),s=Vue.resolveComponent("el-form-item"),L=Vue.resolveComponent("el-input-number"),P=Vue.resolveComponent("el-form"),S=Vue.resolveComponent("el-dialog");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createElementVNode("div",M,[Vue.createCommentVNode('<el-input v-model="query.data.orderId" placeholder="\u8BA2\u5355\u7F16\u53F7"/>'),Vue.createVNode(d,{modelValue:Vue.unref(n).data.orderNo,"onUpdate:modelValue":t[0]||(t[0]=e=>Vue.unref(n).data.orderNo=e),onKeyup:Vue.withKeys(a,["enter"]),placeholder:Vue.unref(r).state.label.orderNo},null,8,["modelValue","onKeyup","placeholder"]),Vue.createVNode(d,{modelValue:Vue.unref(n).data.projectSequence,"onUpdate:modelValue":t[1]||(t[1]=e=>Vue.unref(n).data.projectSequence=e),onKeyup:Vue.withKeys(a,["enter"]),placeholder:Vue.unref(r).state.label.projectSequence},null,8,["modelValue","onKeyup","placeholder"]),Vue.createVNode(m,{modelValue:Vue.unref(n).data.testDevice,"onUpdate:modelValue":t[2]||(t[2]=e=>Vue.unref(n).data.testDevice=e),onChange:a,filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(r).state.label.testDevice,class:"search-item"},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(c).testDeviceList,e=>(Vue.openBlock(),Vue.createBlock(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),Vue.createVNode(d,{modelValue:Vue.unref(n).data.designNumber,"onUpdate:modelValue":t[3]||(t[3]=e=>Vue.unref(n).data.designNumber=e),onChange:a,placeholder:Vue.unref(r).state.label.designNumber,class:"search-item"},null,8,["modelValue","placeholder"]),Vue.createElementVNode("div",O,[Vue.createVNode(p,{icon:Vue.unref(B),onClick:a,type:"primary"},{default:Vue.withCtx(()=>[G]),_:1},8,["icon"]),Vue.createCommentVNode('        <el-button :icon="Plus" @click="handleSaveModal" type="success">Add</el-button>')])]),Vue.createVNode(I,{idKey:"orderId",columnConfigList:D.value,list:Vue.unref(x),handleEdit:Vue.unref(K)(Vue.unref(g),"admin")?N:null,page:Vue.unref(n).page,total:Vue.unref(k),handlePageChange:y,handleLimitChange:w},null,8,["columnConfigList","list","handleEdit","page","total"]),Vue.createVNode(S,{title:Vue.unref(q)?"Add":"Edit",modelValue:Vue.unref(V),"onUpdate:modelValue":t[11]||(t[11]=e=>Vue.isRef(V)?V.value=e:null),width:"60%","close-on-click-modal":!1},{footer:Vue.withCtx(()=>[Vue.createElementVNode("span",J,[Vue.createVNode(p,{onClick:t[10]||(t[10]=e=>V.value=!1)},{default:Vue.withCtx(()=>[$]),_:1}),Vue.createVNode(p,{type:"primary",onClick:_},{default:Vue.withCtx(()=>[Q]),_:1})])]),default:Vue.withCtx(()=>[Vue.createVNode(P,{rules:Vue.unref(E),model:Vue.unref(o),ref_key:"formRef",ref:f,"label-width":"128px"},{default:Vue.withCtx(()=>[Vue.createVNode(s,{prop:"orderNo",label:Vue.unref(r).state.label.orderNo},{default:Vue.withCtx(()=>[Vue.createVNode(d,{modelValue:Vue.unref(o).orderNo,"onUpdate:modelValue":t[4]||(t[4]=e=>Vue.unref(o).orderNo=e),onChange:t[5]||(t[5]=e=>Vue.unref(o).orderNo=(Vue.unref(o).orderNo||"").toUpperCase())},null,8,["modelValue"])]),_:1},8,["label"]),Vue.createVNode(s,{prop:"projectSequence",label:Vue.unref(r).state.label.projectSequence},{default:Vue.withCtx(()=>[Vue.createVNode(d,{modelValue:Vue.unref(o).projectSequence,"onUpdate:modelValue":t[6]||(t[6]=e=>Vue.unref(o).projectSequence=e)},null,8,["modelValue"])]),_:1},8,["label"]),Vue.createVNode(s,{prop:"testDevice",label:Vue.unref(r).state.label.testDevice},{default:Vue.withCtx(()=>[Vue.createVNode(m,{modelValue:Vue.unref(o).testDevice,"onUpdate:modelValue":t[7]||(t[7]=e=>Vue.unref(o).testDevice=e),filterable:"",clearable:"",placeholder:Vue.unref(r).state.label.testDevice,class:"search-item"},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(c).testDeviceList,e=>(Vue.openBlock(),Vue.createBlock(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),Vue.createVNode(s,{prop:"processProcedure",label:Vue.unref(r).state.label.processProcedure},{default:Vue.withCtx(()=>[Vue.createVNode(m,{modelValue:Vue.unref(o).processProcedure,"onUpdate:modelValue":t[8]||(t[8]=e=>Vue.unref(o).processProcedure=e),filterable:"",clearable:"",placeholder:Vue.unref(r).state.label.processProcedure},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(c).processProcedureList,e=>(Vue.openBlock(),Vue.createBlock(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),Vue.createVNode(s,{prop:"orderCount",label:Vue.unref(r).state.label.orderCount},{default:Vue.withCtx(()=>[Vue.createVNode(L,{modelValue:Vue.unref(o).orderCount,"onUpdate:modelValue":t[9]||(t[9]=e=>Vue.unref(o).orderCount=e),min:0,controls:!1},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])])}}}),ue=F(z,[["__file","D:/code/mp-server/src/page/src/page/industry/admin/product/Order.vue"]]);export{ue as default};
