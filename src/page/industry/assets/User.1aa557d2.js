import{s as D,p as S}from"./index.c3e79e11.js";import{_ as q,i as p,h as C,v as M,b as T}from"./main.e162c083.js";import $ from"./ViewList.301fe670.js";import{V as v}from"./ViewContent.29936a75.js";import A from"./ImageUpload.ffae63c6.js";import"./Common.00b9c206.js";import"./IndustryUtil.35abe8a4.js";import"./TableViewContent.c1fd5c92.js";import"./TableColumnViewContent.779ce4dc.js";const O={class:"query-container"},j={class:"query-btn"},z=Vue.createTextVNode("Search"),G=Vue.createTextVNode("Add "),J={class:"dialog-footer"},Q=Vue.createTextVNode("Cancel"),H=Vue.createTextVNode("Confirm"),W=Vue.defineComponent({__name:"User",setup(X){const u=Vuex.useStore(),E=u.state.user,i=u.state.roleCodeList,N=Vue.ref(null),h=Vue.ref([{value:"expand",label:"",width:48,type:v.Expand},{value:"index",labelKey:"index",width:80},{value:"operator",labelKey:"viewAndEdit",width:180,type:v.Operator},{value:"username",labelKey:"username",width:152},{value:"departmentFormat",labelKey:"department",width:186},{value:"name",labelKey:"chineseName",width:168},{value:"userPropertyFormat",labelKey:"userProperty",width:168},{value:"schedule",labelKey:"schedule",width:168,type:v.SelectEdit,optionList:[]},{value:"professionFormat",labelKey:"profession",width:432},{value:"mobile",labelKey:"mobile",width:128},{value:"roleNameList",labelKey:"role",width:256,type:v.TagList},{value:"interviewResume",labelKey:"interviewResume",width:368,type:v.Text,showOverflow:!0},{value:"photoList",labelKey:"photo",width:269,type:v.Image},{value:"stateFormat",labelKey:"state",width:143}]);p(i,"userManager")||(h.value=h.value.filter(n=>n.value!=="interviewResume"));const L={userId:"",photoList:[],roleIdList:["user"],username:"",profession:"",mobile:"",department:"",name:"",interviewResume:"",password:"123456",state:0,userProperty:"",schedule:""},a=Vue.reactive({query:{data:{department:"",profession:"",username:"",roleId:"",name:"",userProperty:"",schedule:"",state:0}},config:{processProcedureList:[],testDeviceList:[],customerShortNameList:[],departmentList:[],professionList:[],optimizeTypeList:[],userPropertyList:[],scheduleList:[]},formData:Object.assign({},L),formRuleList:{roleIdList:[{required:!0,message:"Please check",trigger:"blur"}],username:[{required:!0,message:"Please check",trigger:"blur"}],mail:[{required:!0,message:"Please check",trigger:"blur"}],mobile:[{required:!0,message:"Please check",trigger:"blur"}],nickname:[{required:!0,message:"Please check",trigger:"blur"}],name:[{required:!0,message:"Please check",trigger:"blur"}],photoList:[{required:!1,type:"array",min:0,max:5}]},tableData:new Array,formSave:!1,formVisible:!1});Vue.ref(!1),C("douson/config").then(n=>{a.config=n.data,h.value=h.value.map(l=>(l.value==="schedule"&&(l.type=v.SelectEdit,l.optionList=a.config.scheduleList),l)),s()});const s=()=>{C("system/user/list",a.query.data).then(n=>{a.tableData=(n.list||[]).map(l=>(l.roleNameList=(l.roleList||[]).map(o=>o.roleName),l)),ElementPlus.ElMessage.success("Query success")})},w=Vue.ref(new Array);C("system/role/group/list",{}).then(n=>{w.value=n.list});const U=()=>{a.formVisible=!0,a.formSave=!0,a.formData=Object.assign({},L)},P=(n,l=0)=>{a.formVisible=!0,a.formSave=!1,a.formData=Object.assign({},n)},I=()=>{N.value.validate(n=>{n&&(a.formSave?M("system/user",a.formData).then(()=>{a.formVisible=!1,ElementPlus.ElMessage.success("Add success"),s()}):x(a.formData))})},x=n=>T("system/user",n).then(()=>{a.formVisible=!1,ElementPlus.ElMessage.success("Edit success"),s()}),{query:r,tableData:K,formData:t,formSave:B,config:m,formVisible:y,formRuleList:g}={...Vue.toRefs(a)};return(n,l)=>{const o=Vue.resolveComponent("el-option"),d=Vue.resolveComponent("el-select"),f=Vue.resolveComponent("el-input"),_=Vue.resolveComponent("el-option-group"),k=Vue.resolveComponent("el-button"),V=Vue.resolveComponent("el-form-item"),F=Vue.resolveComponent("el-form"),R=Vue.resolveComponent("el-dialog");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createElementVNode("div",O,[Vue.createVNode(d,{modelValue:Vue.unref(r).data.department,"onUpdate:modelValue":l[0]||(l[0]=e=>Vue.unref(r).data.department=e),filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(u).state.label.department,onChange:s},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(m).departmentList,e=>(Vue.openBlock(),Vue.createBlock(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),Vue.createVNode(d,{modelValue:Vue.unref(r).data.profession,"onUpdate:modelValue":l[1]||(l[1]=e=>Vue.unref(r).data.profession=e),filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(u).state.label.profession,onChange:s},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(m).professionList,e=>(Vue.openBlock(),Vue.createBlock(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),Vue.createVNode(f,{modelValue:Vue.unref(r).data.username,"onUpdate:modelValue":l[2]||(l[2]=e=>Vue.unref(r).data.username=e),onKeyup:Vue.withKeys(s,["enter"]),placeholder:Vue.unref(u).state.label.username},null,8,["modelValue","onKeyup","placeholder"]),Vue.createVNode(f,{modelValue:Vue.unref(r).data.name,"onUpdate:modelValue":l[3]||(l[3]=e=>Vue.unref(r).data.name=e),onKeyup:Vue.withKeys(s,["enter"]),placeholder:Vue.unref(u).state.label.chineseName},null,8,["modelValue","onKeyup","placeholder"]),Vue.createVNode(d,{modelValue:Vue.unref(r).data.roleId,"onUpdate:modelValue":l[4]||(l[4]=e=>Vue.unref(r).data.roleId=e),onChange:s,clearable:"",placeholder:Vue.unref(u).state.label.role},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(w.value,(e,c)=>(Vue.openBlock(),Vue.createBlock(_,{key:`group-${c}`,label:e.label},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(e.list||[],b=>(Vue.openBlock(),Vue.createBlock(o,{key:b.roleId,label:b.roleName,value:b.roleId},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","placeholder"]),Vue.unref(p)(Vue.unref(i),"admin")?(Vue.openBlock(),Vue.createBlock(d,{key:0,modelValue:Vue.unref(r).data.state,"onUpdate:modelValue":l[5]||(l[5]=e=>Vue.unref(r).data.state=e),onChange:s,clearable:"",placeholder:Vue.unref(u).state.label.state},{default:Vue.withCtx(()=>[Vue.createVNode(o,{label:Vue.unref(u).state.label.normal,value:0},null,8,["label"]),Vue.createVNode(o,{label:Vue.unref(u).state.label.leaveCompany,value:1},null,8,["label"])]),_:1},8,["modelValue","placeholder"])):Vue.createCommentVNode("v-if",!0),Vue.createVNode(d,{modelValue:Vue.unref(r).data.userProperty,"onUpdate:modelValue":l[6]||(l[6]=e=>Vue.unref(r).data.userProperty=e),onChange:s,clearable:"",placeholder:Vue.unref(u).state.label.userProperty},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(m).userPropertyList,e=>(Vue.openBlock(),Vue.createBlock(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),Vue.createVNode(d,{modelValue:Vue.unref(r).data.schedule,"onUpdate:modelValue":l[7]||(l[7]=e=>Vue.unref(r).data.schedule=e),onChange:s,clearable:"",placeholder:Vue.unref(u).state.label.schedule},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(m).scheduleList,e=>(Vue.openBlock(),Vue.createBlock(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),Vue.createElementVNode("div",j,[Vue.createVNode(k,{icon:Vue.unref(D),onClick:s,type:"primary"},{default:Vue.withCtx(()=>[z]),_:1},8,["icon"]),Vue.unref(p)(Vue.unref(i),"admin")?(Vue.openBlock(),Vue.createBlock(k,{key:0,icon:Vue.unref(S),onClick:U,type:"success"},{default:Vue.withCtx(()=>[G]),_:1},8,["icon"])):Vue.createCommentVNode("v-if",!0)])]),Vue.createVNode($,{idKey:"userId",columnConfigList:h.value,list:Vue.unref(K),handleEdit:Vue.unref(p)(Vue.unref(i),"admin")?P:null,"handle-update":Vue.unref(p)(Vue.unref(i),"admin")?x:null},null,8,["columnConfigList","list","handleEdit","handle-update"]),Vue.createVNode(R,{title:Vue.unref(B)?"Add":"Edit",modelValue:Vue.unref(y),"onUpdate:modelValue":l[21]||(l[21]=e=>Vue.isRef(y)?y.value=e:null),width:"60%"},{footer:Vue.withCtx(()=>[Vue.createElementVNode("span",J,[Vue.createVNode(k,{onClick:l[20]||(l[20]=e=>y.value=!1)},{default:Vue.withCtx(()=>[Q]),_:1}),Vue.createVNode(k,{type:"primary",onClick:I},{default:Vue.withCtx(()=>[H]),_:1})])]),default:Vue.withCtx(()=>[Vue.createVNode(F,{rules:Vue.unref(g),model:Vue.unref(t),ref_key:"formRef",ref:N,"label-width":"128px"},{default:Vue.withCtx(()=>[Vue.createVNode(V,{prop:"userId",label:"User id"},{default:Vue.withCtx(()=>[Vue.createVNode(f,{modelValue:Vue.unref(t).userId,"onUpdate:modelValue":l[8]||(l[8]=e=>Vue.unref(t).userId=e),disabled:!Vue.unref(B),placeholder:"User ID, if empty, auto create"},null,8,["modelValue","disabled"])]),_:1}),Vue.createVNode(V,{prop:"username",label:Vue.unref(u).state.label.username},{default:Vue.withCtx(()=>[Vue.createVNode(f,{modelValue:Vue.unref(t).username,"onUpdate:modelValue":l[9]||(l[9]=e=>Vue.unref(t).username=e)},null,8,["modelValue"])]),_:1},8,["label"]),Vue.createVNode(V,{prop:"department",label:Vue.unref(u).state.label.department},{default:Vue.withCtx(()=>[Vue.createVNode(d,{modelValue:Vue.unref(t).department,"onUpdate:modelValue":l[10]||(l[10]=e=>Vue.unref(t).department=e),filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(u).state.label.department,disabled:!Vue.unref(p)(Vue.unref(i),"admin")},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(m).departmentList,e=>(Vue.openBlock(),Vue.createBlock(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),Vue.createVNode(V,{prop:"name",label:Vue.unref(u).state.label.chineseName},{default:Vue.withCtx(()=>[Vue.createVNode(f,{modelValue:Vue.unref(t).name,"onUpdate:modelValue":l[11]||(l[11]=e=>Vue.unref(t).name=e)},null,8,["modelValue"])]),_:1},8,["label"]),Vue.createVNode(V,{prop:"userProperty",label:Vue.unref(u).state.label.userProperty},{default:Vue.withCtx(()=>[Vue.createVNode(d,{modelValue:Vue.unref(t).userProperty,"onUpdate:modelValue":l[12]||(l[12]=e=>Vue.unref(t).userProperty=e),clearable:"",placeholder:Vue.unref(u).state.label.userProperty},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(m).userPropertyList,e=>(Vue.openBlock(),Vue.createBlock(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),Vue.createVNode(V,{prop:"schedule",label:Vue.unref(u).state.label.schedule},{default:Vue.withCtx(()=>[Vue.createVNode(d,{modelValue:Vue.unref(t).schedule,"onUpdate:modelValue":l[13]||(l[13]=e=>Vue.unref(t).schedule=e),clearable:"",placeholder:Vue.unref(u).state.label.schedule},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(m).scheduleList,e=>(Vue.openBlock(),Vue.createBlock(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),Vue.createVNode(V,{prop:"profession",label:Vue.unref(u).state.label.profession},{default:Vue.withCtx(()=>[Vue.createVNode(d,{modelValue:Vue.unref(t).profession,"onUpdate:modelValue":l[14]||(l[14]=e=>Vue.unref(t).profession=e),filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(u).state.label.profession,disabled:!Vue.unref(p)(Vue.unref(i),"admin")},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(m).professionList,e=>(Vue.openBlock(),Vue.createBlock(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),Vue.createVNode(V,{prop:"mobile",label:Vue.unref(u).state.label.mobile},{default:Vue.withCtx(()=>[Vue.createVNode(f,{modelValue:Vue.unref(t).mobile,"onUpdate:modelValue":l[15]||(l[15]=e=>Vue.unref(t).mobile=e)},null,8,["modelValue"])]),_:1},8,["label"]),Vue.createVNode(V,{prop:"roleIdList",label:Vue.unref(u).state.label.role},{default:Vue.withCtx(()=>[Vue.createVNode(d,{modelValue:Vue.unref(t).roleIdList,"onUpdate:modelValue":l[16]||(l[16]=e=>Vue.unref(t).roleIdList=e),disabled:Vue.unref(E).username!=="admin",multiple:"",clearable:"",placeholder:Vue.unref(u).state.label.role},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(w.value,(e,c)=>(Vue.openBlock(),Vue.createBlock(_,{key:`group-${c}`,label:e.label},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(e.list||[],b=>(Vue.openBlock(),Vue.createBlock(o,{key:b.roleId,label:b.roleName,value:b.roleId},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","disabled","placeholder"])]),_:1},8,["label"]),Vue.unref(p)(Vue.unref(i),"userManager")?(Vue.openBlock(),Vue.createBlock(V,{key:0,prop:"interviewResume",label:Vue.unref(u).state.label.interviewResume},{default:Vue.withCtx(()=>[Vue.createVNode(f,{type:"textarea",rows:4,modelValue:Vue.unref(t).interviewResume,"onUpdate:modelValue":l[17]||(l[17]=e=>Vue.unref(t).interviewResume=e)},null,8,["modelValue"])]),_:1},8,["label"])):Vue.createCommentVNode("v-if",!0),Vue.createVNode(V,{prop:"password",label:Vue.unref(u).state.label.password},{default:Vue.withCtx(()=>[Vue.createVNode(f,{modelValue:Vue.unref(t).password,"onUpdate:modelValue":l[18]||(l[18]=e=>Vue.unref(t).password=e)},null,8,["modelValue"])]),_:1},8,["label"]),Vue.createVNode(V,{prop:"photoList",label:`${Vue.unref(u).state.label.portrait}(${(Vue.unref(g).photoList||[]).reduce((e,c)=>`Min: ${c.min}, Max: ${c.max}`,"Unlimited")})`},{default:Vue.withCtx(()=>[Vue.createVNode(A,{photoList:Vue.unref(t).photoList,maxSize:Number(`${(Vue.unref(g).photoList||[]).reduce((e,c)=>c.max,999)}`)},null,8,["photoList","maxSize"])]),_:1},8,["label"]),Vue.createVNode(V,{prop:"state",label:Vue.unref(u).state.label.state},{default:Vue.withCtx(()=>[Vue.createVNode(d,{modelValue:Vue.unref(t).state,"onUpdate:modelValue":l[19]||(l[19]=e=>Vue.unref(t).state=e),filterable:"","allow-create":"",clearable:"",placeholder:Vue.unref(u).state.label.state,disabled:!Vue.unref(p)(Vue.unref(i),"admin")},{default:Vue.withCtx(()=>[Vue.createVNode(o,{value:0,label:"Normal"}),Vue.createVNode(o,{value:1,label:"Leave"})]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])])}}});var ne=q(W,[["__scopeId","data-v-336b54d1"],["__file","D:/code/mp-server/src/page/src/page/industry/admin/system/User.vue"]]);export{ne as default};
